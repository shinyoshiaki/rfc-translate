RFCトランス
個人情報保護方針
連絡先
イチジク
@ tex2e
6184
rfc6184日本語訳
URL：https：//tools.ietf.org/html/rfc6184
パッケージ：rfc6184
編集編集：自動生成
[検索] [txt | html | pdf | with errata | bibtex] [Tracker] [WG] [Email] [Diff1] [Diff2] [Nits]
        
差出人：draft-ietf-avt-rtp-rfc3984bis-12提案された標準IPR宣言エラッタ存在インターネット技術特別調査委員会（IETF）Y.-K.Wang Request for Comments：6184 R.廃止されたもの：3984 Huawei Technologiesカテゴリー：標準化過程T. Kristensen ISSN：2070-1721 Tandberg R. Jesup WorldGate Communications 2011年5月

H.264ビデオのRTPペイロード形式

概要

このメモでは、ITU-T勧告H.264ビデオコーデックと技術的に同一のISO / IEC国際標準14496-10ビデオコーデックのRTPペイロード形式について説明します.ただし、Scalable Video Coding（SVC）拡張機能とMultiview VideoCoding拡張機能は除きます. RTPペイロードフォーマットは他の場所で定義されています.RTPペイロード形式では、H.264ビデオエンコーダーによって生成された1つ以上のネットワークアブストラクションレイヤーユニット（NALU）を各RTPペイロードでパケット化できます.ペイロード形式は、単純な低ビットレートの会話型使用から、インターリーブ送信を使用したインターネットビデオストリーミング、高ビットレートのビデオオンデマンドまでのアプリケーションをサポートするため、幅広い適用性があります.

このメモはRFC3984を廃止します.RFC3984からの変更はセクション14に要約されています.RFC3984との下位互換性に関する問題はセクション15で説明されています.

このメモのステータス

これはインターネット標準化過程の文書です.

このドキュメントは、インターネット技術特別調査委員会（IETF）の製品です.これは、IETFコミュニティのコンセンサスを表しています.パブリックレビューを受け、Internet Engineering Steering Group（IESG）による公開が承認されました.インターネット標準の詳細については、RFC5741のセクション2を参照してください.

このドキュメントの現在のステータス、正誤表、およびフィードバックの提供方法に関する情報は、http：//www.rfc-editor.org/info/rfc6184で入手できます.

著作権表示

Copyright（c）2011 IETFTrustおよびドキュメントの作成者として特定された人物.全著作権所有.

このドキュメントは、このドキュメントの発行日に有効なBCP 78およびIETFドキュメントに関連するIETFトラストの法的規定（http://trustee.ietf.org/license-info）の対象となります.これらのドキュメントは、このドキュメントに関するお客様の権利と制限について説明しているため、注意深く確認してください.このドキュメントから抽出されたコードコンポーネントには、Trust LegalProvisionsのセクション4.eで説明されているSimplifiedBSD Licenseテキストが含まれている必要があり、Simplified BSDLicenseで説明されているように保証なしで提供されます.

目次

   1.はじめに......................................................... ..... 4
      1.1.H.264コーデック............................................ 4
      1.2.パラメータセットの概念...................................... 5
      1.3.ネットワーク抽象化レイヤーユニットタイプ....................... 6
   2.規約............................................... ......7
   3.範囲............................................... ............7
   4.定義と略語................................... 7
      4.1.定義................................................ 7
      4.2.略語.............................................. 9
   5.RTPペイロード形式............................................. 10
      5.1.RTPヘッダーの使用法.......................................... 10
      5.2.ペイロード構造........................................ 12
      5.3.NALユニットヘッダーの使用法..................................... 13
      5.4.パケット化モード....................................... 16
      5.5.デコード注文番号（DON）............................... 17
      5.6.単一のNALユニットパケット.................................... 19
      5.7.アグリゲーションパケット....................................... 20
           5.7.1.シングルタイムアグリゲーションパケット（STAP）.............. 22
           5.7.2.マルチタイムアグリゲーションパケット（MTAP）............. 25
      5.8.フラグメンテーションユニット（FU）................................. 29
   6.パケット化ルール............................................ 33
      6.1.一般的なパケット化ルール................................ 33
      6.2.シングルNALユニットモード...................................... 34
      6.3.非インターリーブモード...................................... 34
      6.4.インターリーブモード.......................................... 34
   7.脱パケット化プロセス....................................... 35
      7.1.単一のNALユニットと非インターリーブモード.................. 35
      7.2.インターリーブモード.......................................... 35
           7.2.1.デインターリーブバッファのサイズ................. 36
           7.2.2.デインターリーブプロセス............................ 36
      7.3.追加の脱パケット化ガイドライン.................... 38
        
   8.ペイロードフォーマットパラメータ...................................... 39
      8.1.メディアタイプ登録................................... 39
      8.2.SDPパラメータ............................................ 57
           8.2.1.ペイロードタイプパラメータのSDPへのマッピング.......... 57
           8.2.2.SDPオファー/アンサーモデルでの使用法.............. 58
           8.2.3.宣言型セッション記述での使用法.......... 66
      8.3.例................................................. .68
      8.4.パラメータセットの考慮事項.............................. 75
      8.5.インバンドを使用したデコーダーリフレッシュポイント手順
           パラメータセットの転送（参考情報）.................. 78
           8.5.1.の要求に応答するためのIDR手順
                  デコーダーのリフレッシュポイント............................ 78
           8.5.2.に対応するための段階的な回復手順
                  デコーダーリフレッシュポイントのリクエスト.............. 79
   9.セキュリティに関する考慮事項........................................ 79
   10.輻輳制御............................................ 80
   11.IANAの考慮事項........................................... 81
   12.有益な付録：アプリケーション例.................... 81
      12.1.ITU-TのAnnexAによるビデオ電話
            推奨事項H.241 ..................................... 81
      12.2.ビデオテレフォニー、スライスデータパーティショニングなし、なし
            NALユニットの集約..................................... 82
      12.3.ビデオテレフォニー、インターリーブパケット化を使用
            NALユニットの集約..................................... 82
      12.4.データ分割を使用したビデオテレフォニー................... 83
      12.5.FUおよびフォワードを使用したビデオテレフォニーまたはストリーミング
            エラー訂正......................................... 83
      12.6.低ビットレートストリーミング.................................... 86
      12.7.ビデオストリーミングにおけるロバストなパケットスケジューリング.............. 86
   13.有益な付録：注文番号をデコードする理由..... 87
      13.1.はじめに............................................. 87
      13.2.マルチピクチャースライスインターリーブの例.............. 88
      13.3.ロバストなパケットスケジューリングの例...................... 89
      13.4.冗長コード化のロバストな伝送スケジューリング
            スライス................................................. ..93
      13.5.その他の設計の可能性についての注意.................... 94
   14. RFC3984からの変更......................................... 94
   15. RFC3984との下位互換性............................ 96
   16.謝辞.............................................. 98
   17.参考文献............................................... ..... 98
      17.1.規範的参照..................................... 98
      17.2.有益な参考資料................................... 99
        
1.はじめに
このメモは、ITU-T勧告H.264 [1]およびISO / IEC国際規格14496-10 [2]（どちらもAdvanced Video Coding（AVC）とも呼ばれます）として知られるビデオコーディング標準のRTPペイロード仕様を指定します.このメモでは、コーデックと規格にH.264という名前が使用されていますが、このメモは、コーディング規格のISO / IEC対応物にも同様に適用できます.

このメモはRFC3984を廃止します.RFC3984からの変更はセクション14に要約されています.RFC3984との下位互換性に関する問題はセクション15で説明されています.

1.1.H.264コーデック
H.264ビデオコーデックは、低ビットレートのインターネットストリーミングアプリケーションからHDTVブロードキャスト、ほぼロスレスコーディングのデジタルシネマアプリケーションまで、あらゆる形式のデジタル圧縮ビデオをカバーする非常に幅広いアプリケーション範囲を備えています.現在のテクノロジーの状態と比較すると、H.264の全体的なパフォーマンスは、50％以上のビットレートの節約が報告されているほどです.たとえば、デジタル衛星TVの品質は、MPEG2ビデオの現在の動作ポイントである約3.5Mbit / sと比較して、1.5 Mbit / sで達成可能であると報告されています[10].

コーデック仕様[1]自体は、ビデオコーディングレイヤー（VCL）とネットワークアブストラクションレイヤー（NAL）を概念的に区別しています.VCLには、コーデックの信号処理機能が含まれています.変換、量子化、動き補償予測などのメカニズム.とループフィルター.これは、今日のほとんどのビデオコーデックの一般的な概念、つまり動き補償を伴う画像間予測と残差信号の変換コーディングを使用するマクロブロックベースのコーダーに従います.VCLエンコーダーは、スライスを出力します.整数個のマクロブロックのマクロブロックデータとスライスヘッダーの情報（スライス内の最初のマクロブロックの空間アドレス、初期量子化パラメーター、および同様の情報を含む）を含むビット文字列です.スライスグループの構文を使用して別のマクロブロック割り当てが指定されていない限り、スライス内のマクロブロックはスキャン順に配置されます.画像内予測は、スライス内でのみ使用されます.詳細については、[10]を参照してください.

NALエンコーダーは、VCLエンコーダーのスライス出力をネットワーク抽象化レイヤーユニット（NALU）にカプセル化します.これは、パケットネットワークを介した送信またはパケット指向での使用に適しています.

マルチプレックス環境.H.264のAnnexBは、バイトストリーム指向のネットワークを介してそのようなNALUを送信するためのカプセル化プロセスを定義しています.このメモの範囲では、付録Bは関係ありません.

内部的には、NALはNALユニットを使用します.NALユニットは、1バイトのヘッダーとペイロードのバイト文字列で構成されます.ヘッダーは、NALユニットのタイプ、NALユニットペイロード内のビットエラーまたは構文違反の（潜在的な）存在、およびデコードプロセスにおけるNALユニットの相対的な重要性に関する情報を示します.このRTPペイロード仕様は、NALユニットペイロードのビット文字列を認識しないように設計されています.

H.264の主な特性の1つは、送信時間、デコード時間、およびスライスと画像のサンプリングまたはプレゼンテーション時間の完全な分離です.H.264で指定されているデコードプロセスは時間を認識せず、H.264構文はスキップされたフレームの数などの情報を伝達しません（以前のビデオ圧縮規格の時間参照の形式で一般的です）.また、多くの写真に影響を与えるため、本質的に時代を超越したNALユニットがあります.このため、RTPタイムスタンプの処理には、サンプリング時間または表示時間が定義されていない、または送信時に不明なNALユニットに対して特別な考慮が必要です.

1.2.パラメータセットの概念
H.264の非常に基本的な設計概念の1つは、自己完結型のパケットを生成し、RFC 4629 [11]やMPEG-4Visualのヘッダー拡張コード（HEC）[12]のヘッダー複製などのメカニズムを不要にすることです.これは、メディアストリームから複数のスライスに関連する情報を分離することによって達成されました.この上位層のメタ情報は、スライスパケットを含むRTPパケットストリームから、確実に、非同期に、事前に送信する必要があります.（この情報を帯域内で送信するためのプロビジョニングは、目的に適した帯域外トランスポートチャネルを持たないアプリケーションでも利用できます）.高レベルのパラメーターの組み合わせは、パラメーターセットと呼ばれます.H.264仕様には、シーケンスパラメータセットと画像パラメータセットの2種類のパラメータセットが含まれています.アクティブなシーケンスパラメータセットは、コード化されたビデオシーケンス全体で変更されないままであり、アクティブな画像パラメータセットは、コード化された画像内で変更されないままです.シーケンスおよび画像パラメータセット構造には、画像サイズ、使用されるオプションのコーディングモード、グループマップをスライスするためのマクロブロックなどの情報が含まれています.

スライスパケットストリームに同期してパラメータセットの更新を送信することなく画像パラメータ（画像サイズなど）を変更できるようにするために、エンコーダとデコーダは複数のシーケンスと画像パラメータセットのリストを維持できます.各スライスヘッダーには、使用するシーケンスと画像パラメータセットを示すコードワードが含まれています.

このメカニズムにより、パケットストリームからのパラメータセットの送信と、外部手段（たとえば、機能交換の副作用として）または（信頼できるまたは信頼できない）制御プロトコルを介したパラメータセットの送信を分離できます.それらが送信されない可能性もありますが、アプリケーションの設計仕様によって修正されます.

1.3.Network Abstraction Layer Unit Types ネットワーク抽象化レイヤーユニットタイプ
NAL設計に関するチュートリアル情報は、[13]、[14]、および[15]にあります.

すべてのNALユニットは、単一のNALユニットタイプのオクテットで構成されます.オクテットは、このRTPペイロード形式のペイロードヘッダーとしても機能します.NALユニットのペイロードの説明は次のとおりです.

NALユニットタイプオクテットの構文とセマンティクスは[1]で指定されていますが、NALユニットタイプオクテットの基本的なプロパティを以下に要約します.NALユニットタイプのオクテットの形式は次のとおりです.

      +---------------+
      |0|1|2|3|4|5|6|7|
      +-+-+-+-+-+-+-+-+
      |F|NRI|  Type   |
      +---------------+
        
H.264仕様で指定されている、NALユニットタイプオクテットのコンポーネントのセマンティクスについて、以下で簡単に説明します.

F：1ビットforbidden_​​zero_bit.H.264仕様では、構文違反として値1が宣言されています.

NRI：2ビットnal_ref_idc.値00は、NALユニットのコンテンツが画像間予測用の参照画像の再構築に使用されないことを示します.このようなNALユニットは、参照画像の整合性を損なうことなく廃棄できます.00より大きい値は、参照画像の整合性を維持するためにNALユニットのデコードが必要であることを示します.

タイプ：5ビットnal_unit_type.このコンポーネントは、[1]の表7-1で定義されているように、このメモ内でNALユニットのペイロードタイプを指定します.現在定義されているすべてのNALユニットタイプとそのセマンティクスのリファレンスについては、[1]のセクション7.4.1を参照してください.

このメモでは、セクション5.2に示されている新しいNALユニットタイプを紹介します.このメモで定義されているNALユニットタイプは、[1]で未指定としてマークされています.さらに、この仕様は、セクション5.3で説明されているように、FとNRIのセマンティクスを拡張します.

2.コンベンション
このドキュメントのキーワード「MUST」、「MUST NOT」、「REQUIRED」、「SHALL」、「SHALL NOT」、「SHOULD」、「SHOULD NOT」、「RECOMMENDED」、「MAY」、「OPTIONAL」は次のとおりです. RFC 2119 [4]で説明されているように解釈されます.

この仕様では、ビットフィールドが処理されるときにビットを設定およびクリアするという概念を使用しています.ビットを設定することは、そのビットに値1（オン）を割り当てることと同じです.ビットをクリアすることは、そのビットに値0（オフ）を割り当てることと同じです.

3.範囲
このペイロード仕様は、RTPを介して「ネイキッド」H.264 NALユニットストリームを伝送するためにのみ使用でき、H.264の付録Bで説明されているビットストリーム形式では使用できません.この仕様の最初のアプリケーションは、会話型マルチメディアフィールド、ビデオテレフォニー、またはビデオ会議である可能性がありますが、ペイロード形式は、インターネットストリーミングやTV overIPなどの他のアプリケーションも対象としています.

4.定義と略語
4.1.定義
このドキュメントでは、[1]の定義を使用しています.[1]で定義されている次の用語は、便宜上まとめられています.

アクセスユニット：常にプライマリコード化された画像を含むNALユニットのセット.プライマリ符号化画像に加えて、アクセスユニットはまた、１つまたは複数の冗長符号化画像、または符号化画像のスライスまたはスライスデータパーティションを含まない他のＮＡＬユニットを含み得る.アクセスユニットをデコードすると、常に画像がデコードされます.

コード化されたビデオシーケンス：デコード順に、インスタントデコードリフレッシュ（IDR）アクセスユニットと、それに続く0個以上の非IDRアクセスユニット（後続のIDRアクセスまでのすべての後続のアクセスユニットを含むが、後続のIDRアクセスを含まない）で構成されるアクセスユニットのシーケンス単位.

IDRアクセスユニット：プライマリコード化された画像がIDR画像であるアクセスユニット.

IDR画像：デコードプロセスで「リセット」を引き起こすIまたはSIスライスタイプのスライスのみを含むコード化された画像.IDR画像のデコード後、IDR画像の前にデコードされた画像からの相互予測なしに、デコード順に後続のすべてのコード化画像をデコードできます.

プライマリコード化画像：H.264に準拠するビットストリームのデコードプロセスで使用される画像のコード化表現.プライマリコード化画像には、画像のすべてのマクロブロックが含まれています.

冗長なコード化された画像：画像または画像の一部のコード化された表現.冗長なコード化された画像のコンテンツは、H.264に準拠するビットストリームのデコードプロセスによって使用されてはなりません.冗長なコード化された画像のコンテンツは、エラーまたは損失を含むビットストリームのデコードプロセスによって使用される場合があります.

VCL NALユニット：コード化されたスライスおよびコード化されたデータパーティションのNALユニットを指すために使用される総称.

さらに、次の定義が適用されます.

デコード順序番号（DON）：ペイロード構造内のフィールドまたはNALユニットのデコード順序を示す派生変数.DONの値は、0〜65535の範囲です.最大値に達した後、DONの値は0にラップアラウンドします.

NALユニットのデコード順序：[1]のセクション7.4.1.2に記載されているNALユニットの順序の制約に準拠するNALユニットの順序.

NALU-time：NALユニットが独自のRTPパケットで転送される場合のRTPタイムスタンプの値.

送信順序：RTPシーケンス番号の昇順（モジュロ演算）でのパケットの順序.アグリゲーションパケット内では、NALユニットの送信順序はパケット内のNALユニットの出現順序と同じです.

メディア対応ネットワーク要素（MANE）：RTPペイロードヘッダーまたはRTPペイロードの特定の側面を解析し、コンテンツに反応することができるミドルボックスやアプリケーション層ゲートウェイなどのネットワーク要素.

有益な注意：MANEの概念は、通常のルーターやゲートウェイを超えており、MANEはシグナリングを認識している必要があり（たとえば、メディアストリームのペイロードタイプのマッピングについて学習するため）、安全なリアルタイムトランスポートプロトコル（SRTP）.MANEを使用する利点は、メディアコーディングのニーズに応じてパケットをドロップできることです.たとえば、MANEは、特定のリンクの輻輳が原因でパケットをドロップする必要がある場合、削除によってユーザーエクスペリエンスへの悪影響が最も少ないパケットを識別して削除できます.

静的マクロブロック：[3]のセクション8.3.2.8で定義されているように、ビデオストリーム内の一定量のマクロブロックを静的として定義できます.静的マクロブロックは、非静的マクロブロックを処理するための追加の処理サイクルを解放します.与えられた量のビデオ処理リソースと与えられた解像度に基づいて、静的マクロブロックの数が多いほど、それに応じて高いフレームレートが可能になります.

デフォルトのサブプロファイル：コーディングツールのサブセット.これは、1つのプロファイルのすべてのコーディングツール、または複数のプロファイルのコーディングツールの共通サブセットであり、profile-level-idパラメーターで示されます.

デフォルトレベル：profile-level-idパラメーターで示されるレベル.3つのオクテット、profile_idc、profile-iop、およびlevel_idcで構成されます.デフォルトのレベルは、ほとんどの場合level_idcで示され、場合によっては、さらにprofile-iopで示されます.

4.2.略語
DON：デコード注文番号DONB：デコード注文番号ベースDOND：デコード注文番号の違いFEC：前方誤り訂正FU：フラグメンテーションユニットIDR：瞬時デコード更新IEC：国際電気標準会議ISO：国際標準化機構ITU-T：国際電気標準会議、電気通信標準化セクターMANE：メディア対応ネットワーク要素MTAP：マルチタイムアグリゲーションパケット

MTAP16：16ビットのタイムスタンプオフセットを持つMTAP MTAP24：24ビットのタイムスタンプオフセットを持つMTAP NAL：ネットワーク抽象化レイヤーNALU：NALユニットSAR：サンプルアスペクト比SEI：補足拡張情報STAP：シングルタイムアグリゲーションパケットSTAP-A：STAPタイプA STAP-B：STAPタイプB TS：タイムスタンプVCL：ビデオコーディングレイヤーVUI：ビデオの使用可能性情報

5.RTPペイロード形式
5.1.RTPヘッダーの使用法
RTPヘッダーの形式は、RFC 3550 [5]で指定されており、便宜上、図1に転載されています.このペイロード形式は、その仕様と一致する方法でヘッダーのフィールドを使用します.

RTPパケットごとに1つのNALユニットがカプセル化される場合、推奨されるRTPペイロード形式はセクション5.6で指定されます.アグリゲーションパケットとフラグメンテーションユニットのRTPペイロード（および一部のRTPヘッダービットの設定）は、それぞれセクション5.7.2と5.8で指定されています.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |       sequence number         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           timestamp                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                             ....                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図1.RFC3550に準拠したRTPヘッダー

このRTPペイロードフォーマットに従って設定されるRTPヘッダー情報は次のように設定されます.

マーカービット（M）：1ビットビデオでのMビットの通常の使用に合わせて、RTPタイムスタンプで示されるアクセスユニットの最後のパケットに設定されます.

効率的なプレイアウトバッファ処理を可能にするフォーマット.アグリゲーションパケット（STAPおよびMTAP）の場合、RTPヘッダーのマーカービットは、アグリゲーションパケットの最後のNALユニットのマーカービットが独自のRTPパケットで転送された場合の値に設定する必要があります.デコーダーは、アクセスユニットの最後のパケットの早期表示としてこのビットを使用できますが、このプロパティに依存してはなりません（MUSTNOT）.

情報メモ：複数のNALユニットを伝送するアグリゲーションパケットに関連付けられているMビットは1つだけです.したがって、ゲートウェイがアグリゲーションパケットを複数のパケットに再パケット化した場合、それらのパケットのMビットを確実に設定することはできません.

ペイロードタイプ（PT）：7ビットこの新しいパケット形式へのRTPペイロードタイプの割り当ては、このドキュメントの範囲外であり、ここでは指定しません.ペイロードタイプの割り当ては、使用するプロファイルを介して、または動的な方法で実行する必要があります.

シーケンス番号（SN）：16ビットRFC 3550に従って設定および使用されます.シングルNALUおよび非インターリーブパケット化モードの場合、シーケンス番号はNALUのデコード順序を決定するために使用されます.

タイムスタンプ：32ビットRTPタイムスタンプは、コンテンツのサンプリングタイムスタンプに設定されます.90kHzのクロックレートを使用する必要があります.

NALユニットに独自のタイミングプロパティ（パラメータセットやSEI NALユニットなど）がない場合、RTPタイムスタンプは、NALユニットが含まれているアクセスユニットのプライマリコード化画像のRTPタイムスタンプに設定されます. [1]のセクション7.4.1.2.

MTAPのRTPタイムスタンプの設定は、セクション5.7.2で定義されています.

受信者は、表示タイムスタンプが1つしかないアクセスユニットに含まれる画像タイミングSEIメッセージを無視する必要があります.代わりに、受信者は表示プロセスを同期するためにRTPタイムスタンプを使用する必要があります.

1つのアクセスユニットの画像タイミングSEIメッセージに複数の表示タイムスタンプが含まれている場合、SEIメッセージの情報はRTPタイムスタンプに関連するものとして扱われるべきであり、最も早いイベントはRTPタイムスタンプで指定された時間に発生します.画像タイミングSEIメッセージで運ばれる画像時間値の違いによって与えられるように、後でイベント.

tSEI1、tSEI2、...、tSEInを、アクセスユニットのSEIメッセージで伝送される表示タイムスタンプとします.ここで、tSEI1は、そのようなすべてのタイムスタンプの中で最も早いものです.tmadjst（）を、SEIメッセージのタイムスケールを90kHzのタイムスケールに調整する関数とします.TSをRTPタイムスタンプとします.その場合、tSEI1に関連するイベントの表示時間はTSです.xが[2..n]であるtSEIxのイベントの表示時間は、TS + tmadjst（tSEIx-tSEI1）です.

情報メモ：コード化されたフレームをフィールドとして表示することは、3：2プルダウンと呼ばれる操作で一般的に必要です.この操作では、コード化されたフレームで構成されるフィルムコンテンツが、インターレーススキャンを使用してディスプレイに表示されます.画像タイミングSEIメッセージにより、同じコード化画像に対して複数のタイムスタンプを伝送できるため、3：2プルダウンプロセスが完全に制御されます.RTPタイムスタンプでは、コード化されたフレームごとに1つのタイムスタンプしか伝達できないため、画像タイミングSEIメッセージメカニズムが必要です.

5.2.ペイロード構造
ペイロード形式は、3つの異なる基本的なペイロード構造を定義します.受信者は、RTPパケットペイロードの最初のバイトによってペイロード構造を識別できます.これは、RTPペイロードヘッダーとして、場合によってはペイロードの最初のバイトとして機能します.このバイトは常にNALユニットヘッダーとして構成されます.NALユニットタイプフィールドは、どの構造が存在するかを示します.可能な構造は次のとおりです.

単一のNALユニットパケット：ペイロードに単一のNALユニットのみが含まれます.NALヘッダータイプフィールドは、元のNALユニットタイプと同じです.つまり、1から23の範囲です.セクション5.6で指定されています.

集約パケット：複数のNALユニットを単一のRTPペイロードに集約するために使用されるパケットタイプ.このパケットには、シングルタイムアグリゲーションパケットタイプA（STAP-A）、シングルタイムアグリゲーションパケットタイプB（STAP-B）、16ビットオフセットのマルチタイムアグリゲーションパケット（MTAP）（MTAP16）の4つのバージョンがあります. ）、および24ビットオフセットを使用したマルチタイムアグリゲーションパケット（MTAP）（MTAP24）.STAP-A、STAP-B、MTAP16、およびMTAP24に割り当てられたNALユニットタイプ番号は、それぞれ24、25、26、および27です.セクション5.7で指定されています.

フラグメンテーションユニット：複数のRTPパケットで単一のNALユニットをフラグメント化するために使用されます.FU-AとFU-Bの2つのバージョンがあり、それぞれNALユニットタイプ番号28と29で識別されます.セクション5.8で指定されています.

注意事項：この仕様は、単一のNALユニットパケットおよびフラグメンテーションユニットにカプセル化されたNALユニットのサイズを制限するものではありません.アグリゲーションパケットにカプセル化されたNALユニットの最大サイズは65535バイトです.

表1は、これらのNALユニットのそれぞれがパケットペイロードとして直接使用される場合のNALユニットタイプと対応するRTPパケットタイプをまとめたものであり、タイプはこのメモで説明されています.

表1.NALユニットタイプと対応するパケットタイプの要約

      NAL Unit  Packet    Packet Type Name               Section
      Type      Type
      -------------------------------------------------------------
      0        reserved                                     -
      1-23     NAL unit  Single NAL unit packet             5.6
      24       STAP-A    Single-time aggregation packet     5.7.1
      25       STAP-B    Single-time aggregation packet     5.7.1
      26       MTAP16    Multi-time aggregation packet      5.7.2
      27       MTAP24    Multi-time aggregation packet      5.7.2
      28       FU-A      Fragmentation unit                 5.8
      29       FU-B      Fragmentation unit                 5.8
      30-31    reserved                                     -

        
5.3.NALユニットヘッダーの使用法
NALユニットヘッダーの構造とセマンティクスはセクション1.3で紹介されました.便宜上、NALユニットヘッダーの形式を以下に転載します.

      +---------------+
      |0|1|2|3|4|5|6|7|
      +-+-+-+-+-+-+-+-+
      |F|NRI|  Type   |
      +---------------+
        
このセクションでは、この仕様に従ってFとNRIのセマンティクスを指定します.

F：1ビットforbidden_​​zero_bit.値0は、NALユニットタイプのオクテットとペイロードにビットエラーやその他の構文違反が含まれていてはならないことを示します.値1は、NALユニットタイプのオクテットとペイロードにビットエラーまたはその他の構文違反が含まれている可能性があることを示します.

MANEは、NALユニットで検出されたビットエラーを示すためにFビットを設定する必要があります.H.264仕様では、Fビットが0に等しい必要があります.Fビットが設定されている場合、デコーダーは、ビットエラーまたはその他の構文違反がペイロードまたはNALユニットタイプオクテットに存在する可能性があることを通知されます.Fビットが1に等しいNALユニットに対する最も単純なデコーダの反応は、そのようなNALユニットを破棄し、破棄されたNALユニットで失われたデータを隠すことです.

NRI：2ビットnal_ref_idc.値00およびゼロ以外の値のセマンティクスは、H.264仕様から変更されていません.言い換えると、値00は、NALユニットのコンテンツが画像間予測用の参照画像の再構築に使用されないことを示します.このようなNALユニットは、参照画像の整合性を損なうことなく廃棄できます.00より大きい値は、参照画像の整合性を維持するためにNALユニットのデコードが必要であることを示します.

上記の仕様に加えて、このRTPペイロード仕様によれば、NRIの値は、エンコーダーによって決定された相対的なトランスポート優先度を示します.MANEはこの情報を使用して、重要度の低いNALユニットよりも重要度の高いNALユニットをより適切に保護できます.トランスポートの優先度が最も高いのは11、次に10、次に01です.最後に、00が最低です.

情報メモ：NRIのゼロ以外の値は、H.264デコーダーで同じように処理されます.したがって、レシーバーは、NALユニットをデコーダーに渡すときにNRIの値を操作する必要はありません.

H.264エンコーダーは、nal_unit_typeの値が1から12の範囲にある場合、H.264仕様（7.4.1節）に従ってNRIの値を設定する必要があります.特に、H.264仕様では、nal_unit_typeが6、9、10、11、または12に等しいすべてのNALユニットについて、NRIの値が0に等しい必要があります.

nal_unit_typeが7または8（それぞれシーケンスパラメータセットまたは画像パラメータセットを示す）に等しいNALユニットの場合、H.264エンコーダはNRIの値を11（バイナリ形式）に設定する必要があります.nal_unit_typeが5に等しいプライマリコード化画像のコード化スライスNALユニット（IDR画像に属するコード化スライスを示す）の場合、H.264エンコーダーはNRIの値を11（バイナリ形式）に設定する必要があります.

残りのnal_unit_typesをNRI値にマッピングするには、次の例を使用できますが、特定の環境で効率的であることが示されています[14].アプリケーションと使用中のH.264プロファイルによっては、他のマッピングも望ましい場合があります.

情報注記：データ分割は、メインプロファイルやベースラインプロファイルなどの特定のプロファイルでは使用できません.したがって、NALユニットタイプ2、3、および4は、ビデオビットストリームがデータ分割が許可されているプロファイルに準拠している場合にのみ発生し、メインプロファイルまたはベースラインプロファイルに準拠しているストリームには発生しません.

表2.プライマリコード化参照画像のコード化スライスおよびコード化スライスデータパーティションのNRI値の例

       NAL Unit Type     Content of NAL Unit              NRI (binary)
       ----------------------------------------------------------------
        1              non-IDR coded slice                         10
        2              Coded slice data partition A                10
        3              Coded slice data partition B                01
        4              Coded slice data partition C                01
        
情報メモ：前述のように、非参照画像のNRI値は、H.264で義務付けられているように00です.

H.264エンコーダーは、コード化スライスおよびコード化スライスデータパーティションのNRIの値を01（バイナリ形式）に等しい冗長コード化参照画像のNALユニットに設定する必要があります.

NALユニットタイプ24から29までのNRIの値の定義は、このメモのセクション5.7および5.8に記載されています.

nal_unit_typeが13〜23の範囲のNALユニットについては、これらの値がITU-TおよびISO / IEC用に予約されているため、NRIの値に関する推奨事項はありません.nal_unit_typeが0または30から31の範囲（両端を含む）のNALユニットについては、これらの値のセマンティクスがこのメモで指定されていないため、NRIの値に関する推奨事項は示されていません.

5.4.パケット化モード
このメモでは、パケット化モードの3つのケースを指定しています.

oシングルNALユニットモード

o非インターリーブモード

oインターリーブモード

シングルNALユニットモードは、ITU-T勧告H.241 [3]（セクション12.1を参照）に準拠する会話型システムを対象としています.非インターリーブモードは、ITU-T勧告H.241に準拠していない可能性のある会話型システムを対象としています.非インターリーブモードでは、NALユニットはNALユニットのデコード順に送信されます.インターリーブモードは、非常に低いエンドツーエンドの遅延を必要としないシステムを対象としています.インターリーブモードでは、NALユニットのデコード順序から外れたNALユニットの送信が可能です.

使用中のパケット化モードは、OPTIONALパケット化モードメディアタイプパラメータの値によって通知される場合があります.使用されるパケット化モードは、RTPペイロードで許可されるNALユニットタイプを管理します.表3は、各パケット化モードで許可されるパケットペイロードタイプをまとめたものです.パケット化モードについては、セクション6で詳しく説明します.

      表3.各パケット化で許可されるNALユニットタイプの概要
                モード（yes =許可、no =禁止、ig =無視）
        
      Payload Packet    Single NAL    Non-Interleaved    Interleaved
      Type    Type      Unit Mode           Mode             Mode
      -------------------------------------------------------------
      0      reserved      ig               ig               ig
      1-23   NAL unit     yes              yes               no
      24     STAP-A        no              yes               no
      25     STAP-B        no               no              yes
      26     MTAP16        no               no              yes
      27     MTAP24        no               no              yes
      28     FU-A          no              yes              yes
      29     FU-B          no               no              yes
      30-31  reserved      ig               ig               ig
        
一部のNALユニットまたはペイロードタイプの値（表3に予約済みとして示されています）は、将来の拡張用に予約されています.これらのタイプのNALユニットは、送信者によって送信されるべきではなく（パケットペイロードとして、集約パケット内の集約ユニットとして、またはFUパケット内の断片化されたユニットとして）、受信者によって無視されなければなりません.たとえば、ペイロードタイプ1〜23は、関連するパケットタイプ「NALユニット」とともに次のようになります.

「シングルNALユニットモード」および「非インターリーブモード」では許可されますが、「インターリーブモード」では許可されません.ただし、NALユニットタイプ1〜23のNALユニットは、「インターリーブモード」で、STAP-B、MTAP16、およびMTAP24パケットの集約ユニット、およびFU-AおよびFU-Bパケットのフラグメント化ユニットとして使用できます.同様に、NALユニットタイプ1〜23のNALユニットは、パケットペイロードとして直接使用されるだけでなく、STAP-Aパケットの集約ユニットまたはFU-Aパケットのフラグメント化ユニットとして「非インターリーブモード」で使用することもできます.

5.5.デコード注文番号（DON）
インターリーブパケット化モードでは、NALユニットの送信順序はNALユニットのデコード順序とは異なることが許可されます.デコード順序番号（DON）は、ペイロード構造内のフィールド、またはNALユニットのデコード順序を示す派生変数です.デコード順序から外れた送信とDONの使用の理論的根拠と使用例は、セクション13に記載されています.

送信とデコードの順序の結合は、次のようにOPTIONALsprop-interleaving-depthメディアタイプパラメータによって制御されます.OPTIONAL sprop-interleaving-depthメディアタイプパラメータの値が0に等しい場合（明示的またはデフォルトごと）、NALユニットの送信順序はNALユニットのデコード順序に準拠する必要があります.OPTIONAL sprop-interleaving-depthメディアタイプパラメータの値が0より大きい場合：

o MTAP16およびMTAP24のNALユニットの順序は、NALユニットのデコード順序である必要はありません.

o 2つの連続したパケットでSTAP-B、MTAP、およびFUをデパケット化することによって生成されるNALユニットの順序は、NALユニットのデコード順序である必要はありません.

単一のNALユニットパケット、STAP-A、およびFU-AのRTPペイロード構造には、DONは含まれていません.STAP-BおよびFU-B構造にはDONが含まれ、セクション5.7.2で指定されているように、MTAPの構造によりDONの導出が可能になります.

情報メモ：FU-Aがインターリーブモードで発生すると、常にFU-Bの後に続き、FU-BがDONを設定します.

情報メモ：送信機がパケットごとに1つのNALユニットをカプセル化し、デコード順序から外れてパケットを送信する場合は、STAP-Bパケットタイプを使用できます.

シングルNALユニットのパケット化モードでは、RTPシーケンス番号によって決定されるNALユニットの送信順序は、NALユニットのデコード順序と同じである必要があります.非インターリーブパケット化で

モードでは、単一のNALユニットパケット、STAP-A、およびFU-AでのNALユニットの送信順序は、それらのNALユニットのデコード順序と同じである必要があります.STAP内のNALユニットは、NALユニットのデコード順序で表示される必要があります.したがって、デコード順序は、最初にSTAP内の暗黙的な順序によって提供され、次にSTAP、FU、および単一のNALユニットパケット間の順序のRTPシーケンス番号によって提供されます.

STAP-B、MTAP、およびFU-Bで始まる一連のフラグメンテーションユニットで伝送されるNALユニットのDON値のシグナリングは、それぞれセクション5.7.1、5.7.2、および5.8で指定されています.送信順序の最初のNALユニットのDON値は、任意の値に設定できます.DONの値は、0〜65535の範囲です.最大値に達した後、DONの値は0にラップアラウンドします.

STAP-B、MTAP、またはFU-Bで始まる一連のフラグメンテーションユニットに含まれる2つのNALユニットのデコード順序は、次のように決定されます.DON（i）を、送信順序にインデックスiを持つNALユニットのデコード順序番号とします.関数don_diff（m、n）は次のように指定されます.

      DON（m）== DON（n）の場合、don_diff（m、n）= 0
        
      （DON（m）<DON（n）およびDON（n）-DON（m）<32768）の場合、
      don_diff（m、n）= DON（n）-DON（m）
        
      （DON（m）> DON（n）およびDON（m）-DON（n）> = 32768）の場合、
      don_diff（m、n）= 65536-DON（m）+ DON（n）
        
      （DON（m）<DON（n）およびDON（n）-DON（m）> = 32768）の場合、
      don_diff（m、n）=-（DON（m）+ 65536-DON（n））
        
      （DON（m）> DON（n）およびDON（m）-DON（n）<32768）の場合、
      don_diff（m、n）=-（DON（m）-DON（n））
        
don_diff（m、n）の正の値は、送信順序インデックスnを持つNALユニットが、デコード順序で、送信順序インデックスmを持つNALユニットに続くことを示します.don_diff（m、n）が0に等しい場合、2つのNALユニットのNALユニットのデコード順序はどちらの順序でもかまいません.don_diff（m、n）の負の値は、送信順序インデックスnを持つNALユニットが、デコード順序で、送信順序インデックスmを持つNALユニットに先行することを示します.

DON関連フィールド（DON、DONB、およびDOND.セクション5.7を参照）の値は、上記で指定したDONの値によって決定されるデコード順序がNALユニットのデコード順序に準拠するようにする必要があります.

NALユニットのデコード順序で2つのNALユニットの順序が入れ替わり、新しい順序がNALユニットのデコード順序に準拠していない場合、NALユニットのDONの値は同じであってはなりません（MUSTNOT）.NALユニットストリーム内の2つの連続するNALユニットの順序が切り替えられ、新しい順序がNALユニットのデコード順序に準拠している場合、NALユニットのDONの値は同じである可能性があります.たとえば、使用中のビデオコーディングプロファイルによって任意のスライス順序が許可されている場合、コード化された画像のすべてのコード化されたスライスNALユニットは同じ値のDONを持つことができます.したがって、DONの値が同じNALユニットは任意の順序でデコードでき、DONの値が異なる2つのNALユニットを上記の順序でデコーダに渡す必要があります.NALユニットのデコード順序で2つの連続するNALユニットのDONの値が異なる場合、

NALユニットのデコード順序を回復するためのパケット化解除プロセスの例をセクション7に示します.

情報注記：受信者は、エラーのない送信であっても、NALユニットのデコード順序で2つの連続するNALユニットのDONの値の絶対差が1に等しくなることを期待するべきではありません.DONの値をNALユニットに関連付けるときに、すべてのNALユニットがレシーバーに配信されているかどうかがわからない場合があるため、1ずつインクリメントする必要はありません.たとえば、パケットの転送先のネットワークでビットレートが不足している場合、ゲートウェイは非参照画像のコード化されたスライスNALユニットまたはSEINALユニットを転送しない場合があります.別の例では、生放送は、コマーシャルなどの事前にエンコードされたコンテンツによって時々中断される.事前にエンコードされたクリップの最初のイントラ画像は、受信機ですぐに利用できるようにするために事前に送信されます.最初のイントラ画像を送信するとき、発信者は、事前にエンコードされたクリップの最初のイントラ画像がデコード順に続く前に、エンコードされるNALユニットの数を正確に知りません.したがって、事前にエンコードされたクリップの最初のイントラ画像のNALユニットのDONの値は、送信時に推定する必要があり、DONの値にギャップが生じる可能性があります.

5.6.単一のNALユニットパケット
ここで定義された単一のNALユニットパケットには、[1]で定義されたタイプのNALユニットが1つだけ含まれている必要があります.これは、単一のNALユニットパケット内でアグリゲーションパケットもフラグメンテーションユニットも使用できないことを意味します.単一のNALユニットパケットをRTPシーケンス番号の順序でデパケット化することによって構成されるNALユニットストリームは、NALユニットのデコード順序に準拠する必要があります.単一のNALユニットパケットの構造を図2に示します.

情報メモ：NALユニットの最初のバイトはRTPペイロードヘッダーとして機能します.

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |F|NRI|  Type   |                                               |
    +-+-+-+-+-+-+-+-+                                               |
    |                                                               |
    |               Bytes 2..n of a single NAL unit                 |
    |                                                               |
    |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                               :...OPTIONAL RTP padding        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図2.単一のNALユニットパケットのRTPペイロード形式

5.7.集約パケット
集約パケットは、このペイロード仕様のNALユニット集約スキームです.このスキームは、2つの主要なターゲットネットワークの劇的に異なるMTUサイズを反映するために導入されました.有線IPネットワーク（MTUサイズはイーサネットMTUサイズによって制限されることが多く、約1500バイト）とIPベースまたは非IPベース（約1500バイト）です.例：ITU-T H.324 / M）254バイト以下の優先伝送ユニットサイズのワイヤレス通信システム.2つのワールド間のメディアトランスコーディングを防ぎ、望ましくないパケット化のオーバーヘッドを回避するために、NALユニット集約スキームが導入されています.

この仕様では、次の2種類の集約パケットが定義されています.

oシングルタイムアグリゲーションパケット（STAP）：同一のNALU時間でNALユニットをアグリゲーションします.2種類のSTAPが定義されています.1つはDONなし（STAP-A）、もう1つはDONあり（STAP-B）です.

oマルチタイムアグリゲーションパケット（MTAP）：NALU時間が異なる可能性のあるNALユニットをアグリゲーションします.NALユニットのタイムスタンプオフセットの長さが異なる2つの異なるMTAPが定義されています.

アグリゲーションパケットで伝送される各NALユニットは、アグリゲーションユニットにカプセル化されます.4つの異なる集計単位とその特性については、以下を参照してください.

集約パケットのRTPペイロード形式の構造を図3に示します.

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |F|NRI|  Type   |                                               |
    +-+-+-+-+-+-+-+-+                                               |
    |                                                               |
    |             one or more aggregation units                     |
    |                                                               |
    |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                               :...OPTIONAL RTP padding        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図3.集約パケットのRTPペイロード形式

MTAPとSTAPは、次のパケット化ルールを共有します.

o RTPタイムスタンプは、集約されるすべてのNALユニットのNALU時間の最も早い時間に設定する必要があります.

o NALユニットタイプオクテットのタイプフィールドは、表4に示すように、適切な値に設定する必要があります.

o集約されたNALユニットのすべてのFビットがゼロの場合、Fビットをクリアする必要があります.それ以外の場合は、設定する必要があります.

o NRIの値は、アグリゲーションパケットで伝送されるすべてのNALユニットの最大値でなければなりません.

                 Table 4.  Type field for STAPs and MTAPs

      Type   Packet    Timestamp offset   DON-related fields
                       field length       (DON, DONB, DOND)
                       (in bits)          present
      --------------------------------------------------------
      24     STAP-A       0                 no
      25     STAP-B       0                 yes
      26     MTAP16      16                 yes
      27     MTAP24      24                 yes
        
RTPヘッダーのマーカービットは、集約されたパケットの最後のNALユニットのマーカービットが、それ自体のRTPパケットで転送された場合に持つ値に設定されます.

アグリゲーションパケットのペイロードは、1つ以上のアグリゲーションユニットで構成されます.4つの異なるタイプの集約ユニットについては、セクション5.7.1および5.7.2を参照してください.アグリゲーションパケットは、必要な数のアグリゲーションユニットを伝送できます.ただし、アグリゲーションパケット内のデータの総量は明らかにIPパケットに収まらなければならず、結果のIPパケットがMTUサイズよりも小さくなるようにサイズを選択する必要があります.セクション5.8で指定されているように、アグリゲーションパケットにはフラグメンテーションユニットを含めてはなりません（MUSTNOT）.集約パケットはネストしてはなりません.つまり、アグリゲーションパケットに別のアグリゲーションパケットを含めてはなりません.

5.7.1.シングルタイムアグリゲーションパケット（STAP）
シングルタイムアグリゲーションパケット（STAP）は、すべて同じNALU時間を共有するNALユニットがアグリゲートされる場合は常に使用する必要があります.STAP-AのペイロードはDONを含まず、図4に示すように、少なくとも1つのシングルタイムアグリゲーションユニットで構成されます.STAP-Bのペイロードは、16ビットの符号なしデコード順序番号（DON）で構成されます（図5に示すように、ネットワークバイトオーダー）の後に、少なくとも1つのシングルタイムアグリゲーションユニットが続きます.

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    :                                               |
    +-+-+-+-+-+-+-+-+                                               |
    |                                                               |
    |                single-time aggregation units                  |
    |                                                               |
    |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                               :
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図4.STAP-Aのペイロード形式

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
                    ：デコード注文番号（DON）| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    | |
    | シングルタイムアグリゲーションユニット|
    | |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図5.STAP-Bのペイロード形式

DONフィールドは、STAP-Bの最初のNALユニットのDONの値を送信順に指定します.STAP-Bの出現順序で連続する各NALユニットについて、DONの値は（STAP-Bの前のNALユニットのDONの値+ 1）％65536に等しくなります.ここで、「％」はモジュロ演算.

シングルタイムアグリゲーションユニットは、次のNALユニットのサイズをバイト単位で示す16ビットの符号なしサイズ情報（ネットワークバイト順）で構成されます（これらの2つのオクテットを除くが、NALユニットのNALユニットタイプオクテットを含む）.その後に、NALユニットタイプバイトを含むNALユニット自体が続きます.シングルタイムアグリゲーションユニットは、RTPペイロード内でバイトアラインされますが、32ビットワード境界ではアラインされない場合があります.図6は、シングルタイムアグリゲーションユニットの構造を示しています.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
                    ：NALユニットサイズ| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    | |
    | NALユニット|
    | |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図6.シングルタイムアグリゲーションユニットの構造

図7は、STAP-Aを含むRTPパケットの例を示しています.STAPには、図で1と2のラベルが付いた2つのシングルタイムアグリゲーションユニットが含まれています.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | RTPヘッダー|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | STAP-NAL HDR | NALU1サイズ| NALU 1 HDR |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU1データ|
    ：：
    + +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | | NALU2サイズ| NALU 2 HDR |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU2データ|
    ：：
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図7.2つのシングルタイムアグリゲーションユニットを含むSTAP-Aを含むRTPパケットの例

図8は、STAP-Bを含むRTPパケットの例を示しています.STAPには、図で1と2のラベルが付いた2つのシングルタイムアグリゲーションユニットが含まれています.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | RTPヘッダー|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | STAP-B NAL HDR | ドン| NALU1サイズ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU1サイズ| NALU 1 HDR | NALU1データ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ +
    ：：
    + +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | | NALU2サイズ| NALU 2 HDR |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU2データ|
    ：：
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図8.2つのシングルタイムアグリゲーションユニットを含むSTAP-Bを含むRTPパケットの例

5.7.2.マルチタイムアグリゲーションパケット（MTAP）
MTAPのNALユニットペイロードは、図9に示すように、16ビットの符号なしデコード順序番号ベース（DONB）（ネットワークバイトオーダー）と1つ以上のマルチタイムアグリゲーションユニットで構成されます. MTAPのNALユニットの中でNALユニットのデコード順序の最初のNALユニット.

情報注記：NALユニットのデコード順序の最初のNALユニットは、必ずしもNALユニットがMTAPにカプセル化されている順序の最初のNALユニットであるとは限りません.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
                    ：デコード注文番号ベース| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    | |
    | マルチタイムアグリゲーションユニット|
    | |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図9.MTAPのNALユニットペイロード形式

この仕様では、2つの異なるマルチタイムアグリゲーションユニットが定義されています.どちらも、次のNALユニットの符号なしサイズ情報16ビット（ネットワークバイトオーダー）、8ビット符号なしデコードオーダー番号差（DOND）、およびタイムスタンプオフセット（TS）nビット（ネットワークバイトオーダー）で構成されます.このNALユニットのオフセット）.nは16または24になります.異なるMTAPタイプ（MTAP16およびMTAP24）の選択は、アプリケーションによって異なります.タイムスタンプオフセットが大きいほど、MTAPの柔軟性は高くなりますが、オーバーヘッドはまた高い.

MTAP16とMTAP24のマルチタイムアグリゲーションユニットの構造をそれぞれ図10と11に示します.パケット内の集約ユニットの開始位置または終了位置は、32ビットワード境界上にある必要はありません.マルチタイムアグリゲーションユニットに含まれるNALユニットのDONは、（DONB + DOND）％65536に等しくなります.ここで、％はモジュロ演算を示します.このメモでは、MTAP内のNALユニットの順序は指定されていませんが、ほとんどの場合、NALユニットのデコード順序を使用する必要があります.

タイムスタンプオフセットフィールドは、次の式の値に等しい値に設定する必要があります.NALU-timeがパケットのRTPタイムスタンプ以上の場合、タイムスタンプオフセットは（NALのNALU-time）に等しくなります. unit-パケットのRTPタイムスタンプ）.NALU-timeがパケットのRTPタイムスタンプよりも小さい場合、タイムスタンプオフセットはNALU-time +（2 ^ 32--パケットのRTPタイムスタンプ）に等しくなります.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    ：NALユニットサイズ| DOND | TSオフセット|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | TSオフセット| |
    +-+-+-+-+-+-+-+-+ NALユニット|
    | |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図10.MTAP16のマルチタイムアグリゲーションユニット

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    ：NALユニットサイズ| DOND | TSオフセット|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | TSオフセット| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    | NALユニット|
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        
図11.MTAP24のマルチタイムアグリゲーションユニット

MTAPの「最も早い」マルチタイムアグリゲーションユニットの場合、タイムスタンプオフセットはゼロでなければなりません.したがって、MTAP自体のRTPタイムスタンプは、最も古いNALU時間と同じです.

情報メモ：「最も早い」マルチタイムアグリゲーションユニットは、アグリゲーションユニットに含まれるNALユニットが単一のNALユニットパケットにカプセル化されている場合、MTAPのすべてのアグリゲーションユニットの中で最小の拡張RTPタイムスタンプを持つユニットです.拡張タイムスタンプは、32ビットを超えるタイムスタンプであり、タイムスタンプフィールドのラップアラウンドをカウントできるため、タイムスタンプがラップする場合に最小値を決定できます.このような「最も早い」集約ユニットは、集約ユニットがMTAPにカプセル化されている順序の最初のものではない場合があります.「最も早い」NALユニットは、NALユニットのデコード順序の最初のNALユニットと同じである必要もありません.

図12は、図で1と2のラベルが付けられた2つのマルチタイムアグリゲーションユニットを含むタイプMTAP16のマルチタイムアグリゲーションパケットを含むRTPパケットの例を示しています.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | RTPヘッダー|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | MTAP16 NAL HDR | デコード注文番号ベース| NALU1サイズ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU1サイズ| NALU 1 DOND | NALU 1TSオフセット|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU 1 HDR | NALU1データ|
    +-+-+-+-+-+-+-+-+ +
    ：：
    + +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | | NALU2サイズ| NALU 2 DOND |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU 2TSオフセット| NALU 2 HDR | NALU2データ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    ：：
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図12.2つのマルチタイムアグリゲーションユニットを含むタイプMTAP16のマルチタイムアグリゲーションパケットを含むRTPパケット

図13は、図で1と2のラベルが付けられた2つのマルチタイムアグリゲーションユニットを含むタイプMTAP24のマルチタイムアグリゲーションパケットを含むRTPパケットの例を示しています.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | RTPヘッダー|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | MTAP24 NAL HDR | デコード注文番号ベース| NALU1サイズ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU1サイズ| NALU 1 DOND | NALU 1TSオフ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU 1TSオフ| NALU 1 HDR | NALU1データ|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ +
    ：：
    + +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | | NALU2サイズ| NALU 2 DOND |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU 2TSオフセット| NALU 2 HDR |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | NALU2データ|
    ：：
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図13.2つのマルチタイムアグリゲーションユニットを含むタイプMTAP24のマルチタイムアグリゲーションパケットを含むRTPパケット

5.8.フラグメンテーションユニット（FU）
このペイロードタイプにより、NALユニットを複数のRTPパケットにフラグメント化できます.下位層の断片化（IPなど）に依存する代わりに、アプリケーション層でこれを行うことには、次の利点があります.

oペイロード形式は、特に高解像度形式で、事前に録画されたビデオに存在する可能性のあるIPv4ネットワークを介して64 kバイトを超えるNALユニットを転送できます（画像あたりのスライス数に制限があり、その結果、画像あたりのNALユニットの制限.これにより、NALユニットが大きくなる可能性があります）.

oフラグメンテーションメカニズムにより、セクション12.5で説明されているように、単一のNALユニットをフラグメント化し、一般的な前方誤り訂正を適用できます.

フラグメンテーションは、単一のNALユニットに対してのみ定義され、集約パケットに対しては定義されません.NALユニットのフラグメントは、そのNALユニットの整数個の連続するオクテットで構成されます.NALユニットの各オクテットは、そのNALユニットの正確に1つのフラグメントの一部である必要があります.同じNALユニットのフラグメントは、RTPシーケンス番号の昇順で連続して送信する必要があります（同じRTPパケットストリーム内の他のRTPパケットが最初と最後のフラグメントの間で送信されないようにします）.同様に、NALユニットはRTPシーケンス番号の順序で再組み立てする必要があります.

NALユニットが断片化され、断片化ユニット（FU）内で伝達される場合、それは断片化されたNALユニットと呼ばれます.STAPおよびMTAPは断片化してはなりません.FUはネストしてはいけません.つまり、FUに別のFUを含めてはなりません.

FUを伝送するRTPパケットのRTPタイムスタンプは、フラグメント化されたNALユニットのNALU時間に設定されます.

図14は、FU-AのRTPペイロード形式を示しています.FU-Aは、1オクテットのフラグメンテーションユニットインジケータ、1オクテットのフラグメンテーションユニットヘッダー、およびフラグメンテーションユニットペイロードで構成されます.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | FUインジケーター| FUヘッダー| |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ |
    | |
    | FUペイロード|
    |                                                                |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図14.FU-AのRTPペイロード形式

図15は、FU-BのRTPペイロード形式を示しています.FU-Bは、1オクテットのフラグメンテーションユニットインジケータ、1オクテットのフラグメンテーションユニットヘッダー、デコード順序番号（DON）（ネットワークバイトオーダー）、およびフラグメンテーションユニットペイロードで構成されます.つまり、FU-Bの構造は、追加のDONフィールドを除いて、FU-Aの構造と同じです.

     0 1 2 3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
    | FUインジケーター| FUヘッダー| ドン|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-|
    | |
    | FUペイロード|
    | |
    | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | ：...オプションのRTPパディング|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
        
図15.FU-BのRTPペイロード形式

NALユニットタイプFU-Bは、フラグメント化されたNALユニットの最初のフラグメンテーションユニットのインターリーブパケット化モードで使用する必要があります.NALユニットタイプFU-Bは、他の場合には使用しないでください.言い換えると、インターリーブパケット化モードでは、フラグメント化された各NALUは、最初のフラグメントとしてFU-Bを持ち、その後に1つ以上のFU-Aフラグメントが続きます.

FUインジケーターオクテットの形式は次のとおりです.

       + --------------- +
       | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
       +-+-+-+-+-+-+-+-+
       | F | NRI | タイプ|
       + --------------- +
        
FUインジケーターオクテットのタイプフィールドの28と29に等しい値は、それぞれFU-AとFU-Bを識別します.Fビットの使用についてはセクション5.3で説明します.NRIフィールドの値は、フラグメント化されたNALユニットのNRIフィールドの値に従って設定する必要があります.

FUヘッダーの形式は次のとおりです.

      + --------------- +
      | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
      +-+-+-+-+-+-+-+-+
      | S | E | R | タイプ|
      + --------------- +
        
S：1ビット1に設定すると、スタートビットはフラグメント化されたNALユニットの開始を示します.次のFUペイロードがフラグメント化されたNALユニットペイロードの開始ではない場合、開始ビットはゼロに設定されます.

E：1ビット1に設定すると、終了ビットはフラグメント化されたNALユニットの終了を示します.つまり、ペイロードの最後のバイトは、フラグメント化されたNALユニットの最後のバイトでもあります.次のFUペイロードがフラグメント化されたNALユニットの最後のフラグメントではない場合、終了ビットはゼロに設定されます.

R：1ビット予約ビットは0に等しくなければならず、受信機によって無視されなければなりません.

タイプ：5ビット[1]の表7-1で定義されているNALユニットのペイロードタイプ.

FU-BのDONの値は、セクション5.5で説明されているように選択されます.

情報メモ：FU-BのDONフィールドを使用すると、ゲートウェイは、着信NALユニットをNALユニットのデコード順序に編成することなく、NALユニットをFU-Bにフラグメント化できます.

断片化されたNALユニットは1つのFUで送信してはなりません.つまり、同じFUヘッダーで開始ビットと終了ビットの両方を1に設定してはなりません（MUSTNOT）.

ＦＵペイロードは、断片化されたＮＡＬユニットのペイロードのフラグメントからなるので、連続するＦＵの断片化ユニットペイロードが順次連結される場合、断片化されたＮＡＬユニットのペイロードを再構築することができる.フラグメント化されたNALユニットのNALユニットタイプオクテットは、フラグメント化ユニットペイロードにそのまま含まれませんが、フラグメント化されたNALユニットのNALユニットタイプオクテットの情報は、のFUインジケータオクテットのFフィールドとNRIフィールドで伝達されます.フラグメンテーションユニットとFUヘッダーのタイプフィールド.FUペイロードは、任意の数のオクテットを持つことができ、空にすることができます.

有益な注意：空のFUは、ほぼロスレス環境で特定のクラスの送信者の遅延を減らすことができます.これらの送信者は、NALUが完全に生成される前に、つまりNALUサイズがわかる前に、NALUフラグメントをパケット化するという特徴があります.長さがゼロのNALUフラグメントが許可されていない場合、送信者は、現在のフラグメントを送信する前に、次のフラグメントのデータの少なくとも1ビットを生成する必要があります.いくつかのマクロブロックがゼロビットを占めることがあるH.264の特性により、これは望ましくなく、遅延を追加する可能性があります.ただし、長さがゼロのNALUフラグメントの（潜在的な）使用は、送信に追加のパケットが使用されるためにNALUの少なくとも一部が失われるリスクの増加と慎重に比較検討する必要があります.

断片化ユニットが失われた場合、受信機は、同じ断片化されたNALユニットに対応する送信順序で後続のすべての断片化ユニットを破棄する必要があります.

エンドポイントまたはMANEの受信者は、NALユニットのフラグメントnが受信されない場合でも、NALユニットの最初のn-1フラグメントを（不完全な）NALユニットに集約できます（MAY）.この場合、構文違反を示すために、NALユニットのforbidden_​​zero_bitを1に設定する必要があります.

6.パケット化ルール
パケット化モードはセクション5.2で紹介されています.複数のパケット化モードに共通のパケット化ルールは、セクション6.1で指定されています.シングルNALユニットモード、非インターリーブモード、およびインターリーブモードのパケット化ルールは、それぞれセクション6.2、6.3、および6.4で指定されています.

6.1.一般的なパケット化ルール
使用中のパケット化モードに関係なく、すべての送信者は次のパケット化ルールを適用する必要があります.

oコード化されたスライスNALユニットまたはコード化されたスライスデータパーティション同じコード化された画像に属する（したがって同じRTPタイムスタンプ値を共有する）NALユニットは任意の順序で送信できます.ただし、遅延が重要なシステムの場合、遅延を最小限に抑えるために、元のデコード順序で送信する必要があります.デコードの順序は、ビットストリーム内のNALユニットの順序であることに注意してください.

oパラメータセットは、セクション8.4に記載されているルールと推奨事項に従って処理されます.

o MANEは、シーケンスまたは画像パラメータセットのNALユニットを除いて、NALユニットを複製してはなりません.このメモもH.264仕様も、複製されたNALユニットを識別する手段を提供していないためです.シーケンスおよび画像パラメータセットNALユニットは、正しい受信の可能性を高めるために複製できますが、そのような複製は、アクティブなシーケンスまたは画像パラメータセットの内容に影響を与えてはなりません.複製は、RTPパケット（同じシーケンス番号）を複製することによってではなく、アプリケーション層で実行する必要があります.

非インターリーブモードとインターリーブモードを使用する送信者は、次のパケット化ルールを適用する必要があります.

o RTPトランスレータでは、MANEは単一のNALユニットパケットを1つのアグリゲーションパケットに変換するか、アグリゲーションパケットを複数の単一のNALユニットパケットに変換するか、または両方の概念を混在させることができます.RTPトランスレータは、少なくとも次のパラメータを考慮に入れる必要があります.パスMTUサイズ、不均等な保護メカニズム（たとえば、RFC 5109 [18]に準拠したパケットベースのFECを介して、特にシーケンスおよび画像パラメータセットのNALユニットとコード化されたスライスデータパーティションの場合） NALユニット）、システムの許容可能な遅延、および受信機のバッファリング機能.

情報メモ：RFC 3550に従ってRTP制御プロトコル（RTCP）を処理するには、RTPトランスレータが必要です.

6.2.シングルNALユニットモード
このモードは、OPTIONALパケット化モードメディアタイプパラメータの値が0に等しいか、パケット化モードが存在しない場合に使用されます.すべての受信機はこのモードをサポートしなければなりません.これは主に、ITU-T勧告H.241 [3]を使用するシステムと互換性のある低遅延アプリケーションを対象としています（セクション12.1を参照）.このモードでは、単一のNALユニットパケットのみを使用できます.STAP、MTAP、およびFUは使用しないでください.単一のNALユニットパケットの送信順序は、NALユニットのデコード順序に準拠する必要があります.

6.3.非インターリーブモード
このモードは、OPTIONALパケット化モードのメディアタイプパラメータの値が1に等しい場合に使用されます.このモードはサポートされるべきです（SHOULD）.これは主に低遅延アプリケーションを対象としています.このモードでは、単一のNALユニットパケット、STAP-As、およびFU-Asのみを使用できます.STAP-B、MTAP、およびFU-Bは使用しないでください.NALユニットの送信順序は、NALユニットのデコード順序に準拠する必要があります.

6.4.インターリーブモード
このモードは、OPTIONALパケット化モードのメディアタイプパラメータの値が2に等しい場合に使用されます.一部の受信者はこのモードをサポートする場合があります.STAP-B、MTAP、FU-A、およびFU-Bを使用できます.STAP-Asおよび単一のNALユニットパケットは使用してはなりません（MUSTNOT）.パケットとNALユニットの送信順序は、セクション5.5で指定されているように制約されます.

7.脱パケット化プロセス
パケット化解除プロセスは、実装に依存します.したがって、以下の説明は、適切な実装の例と見なす必要があります.同じ入力の出力が以下に説明するプロセスと同じである限り、他のスキームを使用することもできます.同じ出力は、結果のNALユニットとその順序が同じであることを意味します.説明されているアルゴリズムに関連する最適化が可能である可能性があります.セクション7.1では、単一のNALユニットと非インターリーブパケット化モードのパケット化解除プロセスについて説明し、セクション7.2では、インターリーブモードのプロセスについて説明します.セクション7.3には、インテリジェントレシーバーの追加のパケット化解除ガイドラインが含まれています.

バッファ管理に関連するすべての通常のRTPメカニズムが適用されます.特に、重複または古いRTPパケット（RTPシーケンス番号とRTPタイムスタンプで示される）は削除されます.デコードの正確な時間を決定するには、適切なストリーム間同期を可能にするための意図的な遅延の可能性などの要因を考慮に入れる必要があります.

7.1.単一のNALユニットと非インターリーブモード
受信機には、伝送遅延ジッタを補償するための受信機バッファが含まれています.受信者は、受信パケットを受信順に受信バッファに格納します.パケットはRTPシーケンス番号順にデパケット化されます.パケット化解除されたパケットが単一のNALユニットパケットである場合、パケットに含まれるNALユニットはデコーダに直接渡されます.パケット化解除されたパケットがSTAP-Aの場合、パケットに含まれるNALユニットは、パケットにカプセル化された順序でデコーダに渡されます.単一のNALユニットのフラグメントを含むすべてのFU-Aパケットについて、パケット化解除されたフラグメントは送信順に連結されてNALユニットを回復し、デコーダーに渡されます.

注意事項：デコーダーが任意のスライス順序をサポートしている場合、画像のコード化されたスライスは、受信と送信の順序に関係なく、任意の順序でデコーダーに渡すことができます.

7.2.インターリーブモード
これらのデパケット化ルールの背後にある一般的な概念は、NALユニットを送信順序からNALユニットのデコード順序に並べ替えることです.

受信機は、送信遅延ジッタを補償し、NALユニットを送信順序からNALユニットのデコード順序に並べ替えるために使用される受信機バッファを含む.このセクションでは、受信機の動作について、

伝送遅延ジッターはありません.受信機バッファを、伝送遅延ジッタの補償にも使用される実際の受信機バッファと区別するために、このセクションでは、受信機バッファを以降、デインターリーブバッファと呼びます.受信機は、送信遅延ジッターも準備する必要があります.つまり、送信遅延ジッターバッファリングとデインターリーブバッファリング用に個別のバッファを予約するか、送信遅延ジッターとデインターリーブの両方に受信機バッファを使用する必要があります.さらに、受信機は、例えば、デコードおよび再生を開始する前の追加の初期バッファリングによって、バッファリング操作において伝送遅延ジッタを考慮に入れるべきである（SHOULD）.

このセクションは次のように構成されています.サブセクション7.2.1は、インターリーブ解除バッファーのサイズを計算する方法を示しています.サブセクション7.2.2は、受信したNALユニットをNALユニットのデコード順序に編成する方法に関する受信者プロセスを指定します.

7.2.1.デインターリーブバッファのサイズ
オファー/アンサーまたは宣言型セッション記述プロトコル（SDP）の使用法のいずれかで、sprop-deint-buf-reqメディアタイプパラメーターは、インターリーブ解除バッファーサイズの要件を通知します.したがって、バイト数の観点から、sprop-deint-buf-reqメディアタイプパラメータの値以上のデインターリーブバッファサイズを設定することをお勧めします.

SDPオファー/アンサーモデルまたはその他の機能交換手順をセッションセットアップで使用する場合、受信ストリームのプロパティは、受信者の機能を超えないようにする必要があります.SDPオファー/アンサーモデルでは、レシーバーは、deint-buf-capメディアタイプパラメーターを使用して、インターリーブ解除バッファーを割り当てる機能を示すことができます.deint-buf-capおよびsprop-deint-buf-reqメディアタイプパラメータの詳細についてはセクション8.1を、SDPオファー/アンサーモデルでの使用の詳細についてはセクション8.2.2を参照してください.

7.2.2.デインターリーブプロセス
レシーバーには、初期バッファリングと再生中のバッファリングの2つのバッファリング状態があります.初期バッファリングは、RTPセッションが初期化されるときに発生します.最初のバッファリングの後、デコードと再生が開始され、再生中のバッファリングモードが使用されます.

バッファリングの状態に関係なく、受信機は次のように着信NALユニットを受信順にデインターリーブバッファに格納します.集約パケットのNALユニットは、デインターリーブバッファに個別に格納されます.DONの値は、NALユニットごとに計算および保存されます.

レシーバーの動作は、以下の関数と定数を使用して以下に説明されています.

o関数AbsDONはセクション8.1で指定されています.

o関数don_diffはセクション5.5で指定されています.

o定数Nは、1ずつインクリメントされたオプションのsprop-interleaving-depthメディアタイプパラメーター（セクション8.1を参照）の値です.

最初のバッファリングは、次の条件のいずれかが満たされるまで続きます.

oインターリーブ解除バッファーにN個以上のVCNLALユニットがあります.

o sprop-max-don-diffが存在する場合、don_diff（m、n）はsprop-max-don-diffの値よりも大きくなります.ここで、nは、受信したNALの中でAbsDONの値が最大のNALユニットに対応します. unitsおよびmは、受信したNALユニットの中でAbsDONの値が最小のNALユニットに対応します.

o初期バッファリングは、OPTIONALsprop-init-buf-timeメディアタイプパラメータの値以上の期間継続しました.

デインターリーブバッファから削除されるNALユニットは、次のように決定されます.

oデインターリーブバッファーに少なくともN個のVCLNALユニットが含まれている場合、NALユニットはデインターリーブバッファーから削除され、バッファーにN-1個のVCL NALユニットが含まれるまで、以下に指定された順序でデコーダーに渡されます.

o sprop-max-don-diffが存在する場合、don_diff（m、n）がsprop-max-don-diffより大きいすべてのNALユニットmがデインターリーブバッファーから削除され、順番にデコーダーに渡されます.以下に指定します.ここで、nは、デインターリーブバッファ内のNALユニットの中でAbsDONの値が最大のNALユニットに対応します.

NALユニットがデコーダーに渡される順序は次のように指定されます.

o PDONを、RTPセッションの開始時に0に初期化される変数とします.

o DONの値に関連付けられた各NALユニットについて、DON距離は次のように計算されます.NALユニットのDONの値がPDONの値よりも大きい場合、DON距離はDON-PDONに等しくなります.それ以外の場合、DON距離は65535-PDON + DON +1に等しくなります.

o NALユニットは、DON距離の昇順でデコーダーに配信されます.複数のNALユニットが同じ値のDON距離を共有している場合、それらは任意の順序でデコーダーに渡すことができます.

o必要な数のNALユニットがデコーダーに渡されると、PDONの値は、デコーダーに渡された最後のNALユニットのDONの値に設定されます.

7.3.追加の脱パケット化ガイドライン
次の追加のデパケット化ルールを使用して、運用可能なH.264デパケット化機能を実装できます.

oインテリジェントRTPレシーバー（ゲートウェイなど）は、失われたコード化スライスデータパーティションA（DPA）を識別する場合があります.失われたDPAが検出された場合、再送信とFECの可能性を考慮した後、ゲートウェイは、対応するコード化スライスデータパーティションBとCを送信しないことを決定する場合があります.これらの情報は、H.264デコーダーにとって無意味だからです.このように、MANEは、複雑なビットストリームを解析せずに不要なパケットを破棄することにより、ネットワークの負荷を軽減できます.

oインテリジェントRTPレシーバー（ゲートウェイなど）は、失われたFUを識別する場合があります.失われたFUが見つかった場合、ゲートウェイは、同じフラグメント化されたNALユニットの次のFUを送信しないことを決定する場合があります.これは、それらの情報がH.264デコーダーにとって無意味であるためです.このように、MANEは、複雑なビットストリームを解析せずに不要なパケットを破棄することにより、ネットワークの負荷を軽減できます.

oパケットまたはNALUを破棄する必要があるインテリジェント受信機は、最初に、NALユニットタイプオクテットのNRIフィールドの値が0に等しいすべてのパケット/ NALUを破棄する必要があります.これにより、ユーザーエクスペリエンスへの影響が最小限に抑えられ、参照画像が損なわれません.さらにパケットを破棄する必要がある場合は、

数値的に低いNRI値を持つパケットは、数値的に高いNRI値を持つパケットの前に破棄する必要があります.ただし、NRIが0より大きいパケットを破棄すると、デコーダーのドリフトが発生する可能性が非常に高いため、回避する必要があります.

8.ペイロードフォーマットパラメータ
このセクションでは、ペイロード形式のオプション機能とビットストリームの特定の機能を選択するために使用できるパラメータを指定します.パラメータは、ITU-TH.264のメディアサブタイプ登録の一部としてここで指定されます.ISO / IEC14496-10コーデック.SDPを使用するアプリケーションには、セッション記述プロトコル（SDP）[6]へのパラメーターのマッピングも提供されます.SDPを使用しない制御プロトコルで使用するために、同等のパラメーターを他の場所で定義できます.

一部のパラメーターは、送信されるストリームのプロパティを受信者に提供します.これらすべてのパラメーターの名前は、ストリームプロパティの「sprop」で始まります.これらの「sprop」パラメーターの一部は、他のペイロードまたはコーデック構成パラメーターによって制限されます.たとえば、sprop-parameter-setsパラメーターはprofile-level-idパラメーターによって制約されます.

8.1.メディアタイプ登録
ITU-TH.264のメディアサブタイプ| ISO / IEC14496-10コーデックがIETFツリーから割り当てられました.

メディアタイプ名：ビデオ

メディアサブタイプ名：H264

必要なパラメーター：なし

オプションのパラメータ：

profile-level-id：シーケンスパラメータセットNALユニットの次の3バイトのbase16 [7]（16進数）表現は[1]で指定されます：1）profile_idc、2）ここではprofile-iopと呼ばれるバイト.最上位ビットから順に、constraint_set0_flag、constraint_set1_flag、constraint_set2_flag、constraint_set3_flag、constraint_set4_flag、constraint_set5_flag、reserved_zero_2bitsの値で構成され、3）level_idc.[1]ではreserved_zero_2bitsは0に等しい必要がありますが、他の値は将来ITU-TまたはISO / IECによって指定される可能性があることに注意してください.

profile-level-idパラメーターは、デフォルトのサブプロファイル（つまり、ストリームの生成に使用された可能性のある、またはレシーバーがサポートするコーディングツールのサブセット）と、ストリームまたはレシーバーがサポートするデフォルトのレベルを示します.

デフォルトのサブプロファイルは、profile_idcバイトとprofile-iopバイトの一部のフィールドによってまとめて示されます.profile-iopバイトのフィールドの値に応じて、デフォルトのサブプロファイルは、セクション7.4.2.1で指定されているように、1つのプロファイルでサポートされるコーディングツールのセット、または複数のプロファイルのコーディングツールの共通サブセットです. [1]の1.デフォルトのレベルはlevel_idcバイトで示され、profile_idcが66、77、または88（ベースライン、メイン、または拡張プロファイル）に等しく、level_idcが11に等しい場合、さらにプロファイルのビット4（constraint_set3_flag）によって示されます. -iopバイト.profile_idcが66、77、または88（ベースライン、メイン、または拡張プロファイル）に等しい場合、level_idcは11に等しく、profile-iopバイトのビット4（constraint_set3_flag）は1に等しい場合、デフォルトのレベルはLevelです. 1b.

表5に、[1]の付録Aで定義されているすべてのプロファイルと、各プロファイルについて、同じサブプロファイルを表すprofile_idcとprofile-iopの可能な組み合わせを示します.

表5.1つのプロファイルでサポートされるコーディングツールのフルセットに対応する同じサブプロファイルを表すprofile_idcとprofile-iopの組み合わせ.以下では、xは0または1のいずれかですが、プロファイル名は次のように示されます.CB：制約付きベースラインプロファイル、B：ベースラインプロファイル、M：メインプロファイル、E：拡張プロファイル、H：ハイプロファイル、H10：ハイ10プロファイル、H42：ハイ4：2：2プロファイル、H44：ハイ4：4：4予測プロファイル、H10I：高10イントラプロファイル、H42I：高4：2：2イントラプロファイル、H44I：高4：4：4イントラプロファイル、およびC44I：CAVLC 4：4：4イントラプロファイル.

プロファイルprofile_idcプロファイル-iop（16進数）（バイナリ）

CB 42（B）x1xx0000と同じ：4D（M）1xxx0000と同じ：58（E）11xx0000 B 42（B）x0xx0000と同じ：58（E）10xx0000 M 4D（M）0x0x0000 E 58 00xx0000 H 64 00000000 H10 6E 00000000 H42 7A 00000000 H44 F4 00000000 H10I 6E 00010000 H42I 7A 00010000 H44I F4 00010000 C44I 2C 00010000

たとえば、上記の表で、profile_idcが58（拡張）でprofile-iopが11xx0000の場合、profile_idcが42（ベースライン）であり、profile-iopがx1xx0000の場合に対応する同じサブプロファイルを示します.profile_idcとprofile-iopの他の組み合わせ（表5にはリストされていません）は、複数のプロファイルのコーディングツールの一般的なサブセットと同等のサブプロファイルを表す場合があることに注意してください.また、特定のプロファイルに準拠するデコーダーは、他のプロファイルに準拠するビットストリームをデコードできる場合があることにも注意してください.

profile-level-idパラメーターを使用してNALユニットストリームのプロパティを示す場合、ストリームをデコードするために、デコーダーがサポートする必要のあるコーディングツールの最小サブセットがデフォルトのサブプロファイルであり、最低レベルであることを示します.デコーダーがサポートする必要があるのはデフォルトレベルです.

profile-level-idパラメーターが機能交換またはセッションセットアップに使用される場合、コーデックが受信と送信の両方でサポートする、デフォルトのサブプロファイルに等しいコーディングツールのサブセットを示します.max-recv-levelが存在しない場合、profile-level-idのデフォルトレベルは、コーデックがサポートしたい最高レベルを示します.max-recv-levelが存在する場合、コーデックが受信をサポートする最高レベルを示します.受信または送信のいずれの場合も、サポートされている最高レベルよりも低いすべてのレベルもサポートされている必要があります.

有益な注意：機能交換およびセッションセットアップ手順は、サポートされている各サブプロファイルの機能を個別にリストする手段を提供する必要があります.たとえば、SDPオファー/アンサーモデルの1つのNコーデック選択手順を使用できます（[8]のセクション10.2）.1つのNコーデック選択手順を使用して、同じサブプロファイルを表すprofile_idcとprofile-iopのさまざまな組み合わせを提供することもできます.同じサブプロファイルを表すprofile_idcとprofile-iopのさまざまな組み合わせがある場合、one-of-Nコーデック選択手順を使用すると、かなり大きなSDPメッセージが生成される可能性があります.したがって、受信者は、同じサブプロファイルを表すprofile_idcとprofile-iopのさまざまな同等の組み合わせを理解し、同等の組み合わせのいずれかを使用してオファーを受け入れる準備ができている必要があります.

profile-level-idが存在しない場合、レベル1で追加の制約がないベースラインプロファイルを推測する必要があります.

max-recv-level：このパラメーターは、最高レベルがデフォルトレベル（profile-level-idで示されるレベル）よりも高い場合に、レシーバーがサポートする最高レベルを示すために使用できます.max-recv-levelの値は、[1]で指定されたシーケンスパラメータセットNALユニットの構文要素profile_idcの後の2バイトのbase16（16進数）表現です：profile-iop（上記で定義）およびlevel_idc.max-recv-levelのlevel_idcバイトが11に等しく、max-recv-levelのprofile-iopバイトのビット4が1に等しい場合、またはmax-recv-levelのlevel_idcバイトが9に等しく、ビットmax-recv-levelのprofile-iopバイトの4は0に等しく、レシーバーがサポートする最高レベルはレベル1bです.それ以外の場合、レシーバーがサポートする最高レベルは、max-recv-levelのlevel_idcバイトを10で割った値に等しくなります.

レシーバーがサポートする最高レベルがデフォルトレベルより高くない場合、max-recv-levelは存在してはなりません（MUSTNOT）.

max-mbps、max-smbps、max-fs、max-cpb、max-dpb、およびmax-br：これらのパラメーターは、レシーバー実装の機能を通知するために使用できます.これらのパラメータは、他の目的に使用してはなりません.profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で伝達される最高レベルは、レシーバーが完全にサポートできるようなものでなければなりません.max-mbps、max-smbps、max-fs、max-cpb、max-dpb、およびmax-brは、以下に指定するように、信号の最高レベルの必要な機能を拡張する受信機の機能を示すために使用できます.

セットから複数のパラメーター（max-mbps、max-smbps、max-fs、max-cpb、max-dpb、max-br）が存在する場合、レシーバーはすべての信号機能を同時にサポートする必要があります.たとえば、max-mbpsとmax-brの両方が存在する場合、フレームレートとビットレートの両方が拡張された信号の最高レベルがサポートされます.つまり、レシーバーは、マクロブロック処理レートが最大-mbps（両端を含む）、ビットレートが最大-br（両端を含む）であるNALユニットストリームをデコードできます.コード化された画像バッファーサイズは、で指定されているように導出されます.以下のmax-brパラメーターのセマンティクス、およびその他のプロパティは、profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で指定された最高レベルに準拠しています.

受信者がレベルAのすべてのプロパティをサポートできる場合、profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で指定された最高レベルはレベルAでなければなりません（つまり、レベルAより低くてはなりません）. .言い換えると、レシーバーは、max-mbps、max-fs、max-cpb、max-dpb、およびmax-brの値を信号で伝えてはならず、これらを合わせて、値で指定された最高レベルと比較して、より高いレベルの要件を満たします. profile-level-idパラメーターまたはmax-recv-levelパラメーターの.

情報注記：オプションのメディアタイプパラメータを使用してNALユニットストリームのプロパティを通知する場合、max-mbps、max-smbps、max-fs、max-cpb、max-dpb、およびmax-brは存在せず、 profile-level-idの値は、NALユニットストリームが指定されたプロファイルとレベルに完全に準拠するように常に設定する必要があります.

max-mbps：max-mbpsの値は、最大マクロブロック処理速度を1秒あたりのマクロブロック単位で示す整数です.max-mbpsパラメーターは、受信者が、profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で伝達される信号の最高レベルで必要とされるよりも高いレートでビデオをデコードできることを通知します.

max-mbpsが通知されると、受信者は、通知された最高レベルの[1]の表A-1のMaxMBPS値がに置き換えられることを除いて、通知された最高レベルに準拠するNALユニットストリームをデコードできなければなりません. max-mbpsの値.max-mbpsの値は、最高レベルの[1]の表A-1に示されているMaxMBPSの値以上である必要があります.送信者は、この知識を使用して、指定されたサイズの画像を、通知された最高レベルで示されているよりも高い画像レートで送信できます（MAY）.

max-smbps：max-smbpsの値は、すべてのマクロブロックが静的マクロブロックであるという仮定の下で、1秒あたりの静的マクロブロックの単位で最大静的マクロブロック処理速度を示す整数です.max-smbpsが通知された場合、[1]の表A-1のMaxMBPS値は、次の計算結果に置き換える必要があります.

oパラメーターmax-mbpsが通知された場合は、変数MaxMacroblocksPerSecondをmax-mbpsの値に設定します.それ以外の場合は、MaxMacroblocksPerSecondを、profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で伝達されるシグナルの最高レベルの表A-1 [1]のMaxMBPSの値に等しく設定します.

o変数P_non-staticを、画像nの非静的マクロブロックの比率に設定します.

o変数P_staticを画像nの静的マクロブロックの比率に設定します.

o [1]の表A-1のMaxMBPSの値は、エンコーダーによって次の値と等しいと見なされる必要があります.

            MaxMacroblocksPerSecond * max-smbps /（P_non-static *
            max-smbps + P_static * MaxMacroblocksPerSecond）
        
エンコーダは、画像ごとにこの値を再計算する必要があります.max-smbpsの値は、max-mbpsパラメータの値として明示的に指定されたMaxMBPSの値以上であるか、シグナルの最高レベルについて[1]の表A-1で暗黙的に指定されている必要があります.送信者は、この知識を使用して、指定されたサイズの画像を、通知された最高レベルで示されているよりも高い画像レートで送信できます（MAY）.

max-fs：max-fsの値は、マクロブロック単位で最大フレームサイズを示す整数です.max-fsパラメータは、受信機が、伝達された信号の最高レベルで必要とされるよりも大きな画像サイズをデコードできることを通知します

profile-level-idパラメーターまたはmax-recv-levelパラメーターの値.max-fsが通知されると、受信者は、通知された最高レベルの[1]の表A-1のMaxFS値がに置き換えられることを除いて、通知された最高レベルに準拠するNALユニットストリームをデコードできなければなりません. max-fsの値.max-fsの値は、最高レベルの[1]の表A-1に示されているMaxFSの値以上である必要があります.送信者は、この知識を使用して、信号の最高レベルで示されるよりも比例して低いフレームレートで大きな画像を送信できます（MAY）.

max-cpb：max-cpbの値は、VCL HRDパラメーターの場合は1000ビット単位で、NAL HRDパラメーターの場合は1200ビット単位で、最大コード化画像バッファー・サイズを示す整数です.このパラメーターは、cpbBrVclFactorおよびcpbBrNALFactorの単位を使用しないことに注意してください（[1]の表A-1を参照）.max-cpbパラメータは、profile-level-idパラメータまたはmax-recv-levelパラメータの値で伝達される信号の最高レベルに必要なコード化された画像バッファメモリの最小量よりも多くのメモリが受信機にあることを通知します.max-cpbがシグナリングされると、レシーバーは、シグナリングされた最高レベルに準拠するNALユニットストリームをデコードできなければなりません.ただし、[1]の表A-1のシグナルされた最高レベルのMaxCPB値は、max-cpbの値に置き換えられます（必要に応じてcpbBrVclFactorとcpbBrNALFactorを考慮した後）.max-cpbの値（必要に応じてcpbBrVclFactorとcpbBrNALFactorを考慮した後）は、最高レベルの[1]の表A-1に示されているMaxCPBの値以上である必要があります.送信者は、この知識を使用して、[1]の表A-1のMaxCPB値で達成できるよりもビットレートの変動が大きいコード化されたビデオストリームを構築できます（MAY）.

有益な注意：コード化された画像バッファは、架空のリファレンスデコーダー（H.264の付録C）で使用されます.H.264エンコーダーでは、生成されたビットストリームが標準に準拠していることを確認し、出力ビットレートを制御するために、架空のリファレンスデコーダーを使用することをお勧めします.したがって、コード化された画像バッファは、デインターリーブおよびデジッタバッファを含む、受信機内の他の潜在的なバッファから概念的に独立しています.コード化された画像バッファは、H.264のAnnex Cで指定されているようにデコーダに実装する必要はありませんが、標準準拠のビットストリームをデコードできる場合は、標準準拠のデコーダに任意のバッファリング構成を設定できます.したがって、実際には、ビデオデコーダの入力バッファは、受信機のデインターリーブおよびデジッタバッファと統合することができます.

max-dpb：max-dpbの値は、デコードされた画像の最大バッファーサイズを8/3マクロブロック単位で示す整数です.max-dpbパラメータは、profile-level-idパラメータまたはmax-recv-levelパラメータの値で伝達される信号の最高レベルに必要なデコードされた画像バッファメモリの最小量よりも多くのメモリが受信機にあることを通知します.max-dpbがシグナリングされると、受信者は、シグナリングされた最高レベルの[1]の表A-1のMaxDpbMbs値がに置き換えられることを除いて、シグナリングされた最高レベルに準拠するNALユニットストリームをデコードできなければなりません. max-dpb * 3/8の値.したがって、max-dpbに信号を送る受信機は、デコードされた画像バッファに次の数のデコードされたフレーム、相補的なフィールドペア、およびペアになっていないフィールドを格納できなければなりません.

            Min（max-dpb * 3/8 /（PicWidthInMbs * FrameHeightInMbs）、
            16）
        
ここで、PicWidthInMbsとFrameHeightInMbsは[1]で定義されています.

max-dpbの値は、MaxDpbMbs * 3/8の値以上である必要があります.ここで、MaxDpbMbsの値は、最高レベルの[1]の表A-1に示されています.送信者は、この知識を使用して、圧縮が改善されたコード化されたビデオストリームを構築できます（MAY）.

情報注記：このパラメータは、シグナリングゲートウェイの設計を容易にするために、主にITU-T勧告H.245の同様のコードポイントを補完するために追加されました.デコードされた画像バッファは、再構成されたサンプルを保存します.デコードされた画像バッファのサイズとRTPで使用されるバッファ、特にデインターリーブとデジッタバッファの間に関係はありません.

情報メモ：このドキュメントで廃止されたRFC 3984では、このパラメータの単位は1024バイトでした.このドキュメントでは、単位が8/3マクロブロックに変更されています.この変更の理由は、RFC 3984で参照されているH.264仕様の2003バージョンから、このドキュメントで参照されているH.264仕様の2010バージョンへの変更、特にHの表A-1への変更によるものです.以前はサポートされていなかったカラーフォーマットとビット深度の追加による.264仕様.このパラメータの変更されたセマンティクスは、RFC 3984との下位互換性を維持し、H.264仕様の2010バージョンで定義されたすべてのプロファイルをサポートします.

max-br：max-brの値は、VCL HRDパラメーターの場合は1000ビット/秒の単位で、NALHRDパラメーターの場合は1200ビット/秒の単位で最大ビデオビットレートを示す整数です.このパラメーターは、cpbBrVclFactorおよびcpbBrNALFactorの単位を使用しないことに注意してください（[1]の表A-1を参照）.

max-brパラメーターは、レシーバーのビデオデコーダーが、profile-level-idパラメーターまたはmax-recv-levelパラメーターの値で伝達される信号の最高レベルで必要とされるよりも高いビットレートでビデオをデコードできることを通知します. .

max-brが通知されると、受信機のビデオコーデックは、通知された最高レベルに準拠するNALユニットストリームをデコードできなければなりません.ただし、最高レベルで指定された制限には次の例外があります.

o max-brの値（必要に応じてcpbBrVclFactorとcpbBrNALFactorを考慮した後）は、[1]の表A-1のMaxBR値を最高レベルに置き換えます.

o max-cpbパラメーターが存在しない場合、次の式の結果は、[1]の表A-1のMaxCPBの値を置き換えます.（シグナルレベルのMaxCPB）* max-br /（シグナル最高のMaxBRレベル）.

たとえば、レシーバーがメインプロファイルレベル1.2の機能を信号し、max-brが1550に等しい場合、これは、VCLHRDパラメーターの最大ビデオビットレートが1550kbits / sec、NALHRDパラメーターの最大ビデオビットレートが1860kbits /秒であることを示します. 、および4036458ビットのCPBサイズ（1550000/384000 * 1000 * 1000）.

max-brの値（必要に応じてcpbBrVclFactorとcpbBrNALFactorを考慮した後）は、信号の最高レベルについて[1]の表A-1に示されている値MaxBR以上である必要があります.

送信者は、この知識を使用して、H.264のAnnex Aのレベル定義で許可されているように、より高いビットレートのビデオを送信して、ビデオ品質を向上させることができます.

情報注記：このパラメータは、シグナリングゲートウェイの設計を容易にするために、主にITU-T勧告H.245の同様のコードポイントを補完するために追加されました.ネットワークがいつでもそのようなビットレートを処理できるという仮定は、

このパラメータ.特に、信号されたビットレートが輻輳制御の制約下で可能であるという結論を引き出すことはできません.

redundant-pic-cap：このパラメーターは、レシーバー実装の機能を通知します.0に等しい場合、パラメータは、受信者が冗長なコード化された画像を使用して、誤ってデコードされたプライマリコード化された画像を修正しようとしないことを示します.0に等しい場合、レシーバーは冗長スライスを使用できません.したがって、送信者は、帯域幅を節約するために冗長なスライスを送信しないようにする必要があります.1に等しい場合、受信者は、プライマリデコードされた画像の破損した領域をカバーするそのような冗長スライスを（少なくとも部分的に）デコードできるため、送信者は冗長スライスを送信できます（MAY）.パラメータが存在しない場合、redundant-pic-capには値0を使用する必要があります.存在する場合、redundant-pic-capの値は0または1でなければなりません.

profile-level-idパラメーターがredundant-pic-capパラメーターと同じシグナリングに存在し、profile-level-idで示されるプロファイルが、冗長なコード化された画像（メインプロファイルなど）の使用を許可しないようなものである場合、冗長-pic-capの値は0に等しくなければなりません.受信者が冗長-pic-capが0に等しいことを示すとき、受信されたストリームは冗長なコード化された画像を含むべきではありません（SHOULDNOT）.

情報注記：redundant-pic-capが0に等しい場合でも、デコーダーが冗長なコーデック画像を許可するプロファイル（Baseline、Extended）をサポートしていれば、デコーダーは冗長なコーデック画像を無視できます.

情報メモ：redundant-pic-capが1に等しい場合でも、受信者は他のエラー隠蔽戦略を選択して、冗長スライスのデコードを置き換えたり補完したりすることができます.

sprop-parameter-sets：このパラメーターは、デコード時に他のNALユニットの前にNALユニットストリームに配置できるシーケンスおよび画像パラメーターセットのNALユニット（ここでは初期パラメーターセットNALユニットと呼びます）を伝達するために使用できます.注文.パラメータは、機能交換手順でコーデック機能を示すために使用してはなりません（MUSTNOT）.パラメータの値は、セクション7.3.2.1およびセクション7.3.2.1で指定されているパラメータセットNALユニットのbase64 [7]表現のコンマ区切り（ '、'）リストです.

[1]の7.3.2.2.パラメータセットNALユニットのバイト数は通常10未満ですが、画像パラメータセットNALユニットには数百バイトが含まれる場合があることに注意してください.

情報メモ：SDPオファー/アンサーモデルで複数のペイロードタイプが提供され、それぞれに独自のsprop-parameter-setsパラメーターがある場合、受信者は、それらのパラメーターセットが競合するストレージの場所（つまり、パラメーターセットの同じ値）を使用していないと想定できません.識別子）.したがって、レシーバーはすべてのsprop-parameter-setをバッファーに入れ、特定のペイロードタイプをデコードするデコーダーインスタンスでそれらを使用できるようにする必要があります.

sprop-parameter-setsパラメーターには、profile-level-idに準拠するパラメーターセットのみが含まれている必要があります.つまり、パラメーターセットのいずれかで示されるコーディングツールのサブセットは、デフォルトのサブプロファイルと同じである必要があります.パラメータセットのいずれかで示されるものは、デフォルトレベルと等しくなければなりません.

sprop-level-parameter-sets：このパラメーターは、他のNALユニットの前にNALユニットストリームに配置できるシーケンスおよび画像パラメーターセットのNALユニット（ここでは初期パラメーターセットNALユニットと呼びます）を伝達するために使用できます.デコード順に、デフォルトレベルとは異なる1つ以上のレベルに関連付けられています.パラメータは、機能交換手順でコーデック機能を示すために使用してはなりません（MUSTNOT）.

sprop-level-parameter-setsパラメーターには、デフォルトレベルとは異なる1つ以上のレベルのパラメーターセットが含まれています.1つのレベルに関連付けられているすべてのパラメーターセットはクラスター化され、profile-level-idと同じ構文を持つ3バイトのフィールドがプレフィックスとして付けられます.これにより、レシーバーは1つのレベルのパラメーターセットをインストールし、残りを破棄できます.3バイトのフィールドにはPLIdという名前が付けられ、1つのレベルに関連付けられているすべてのパラメーターセットにはPSLという名前が付けられます.これは、sprop-parameter-setsと同じ構文です.各レベルのパラメーターセットは、PLId：PSLの形式で表されます.つまり、PLIdの後にコロン（ '：'）が続き、レベルの初期パラメーターセットNAL単位のbase64 [7]表現が続きます.PLId：PSLの各ペアもコロンで区切られます.PSLには、そのレベルの複数のパラメータセットを含めることができることに注意してください.

各PLIdフィールドによって示されるコーディングツールのサブセットは、デフォルトのサブプロファイルと等しくなければならず、各PLIdフィールドによって示されるレベルはデフォルトレベルとは異なっていなければなりません.すべて

各PSLに含まれるシーケンスパラメータセットは、profile_idcからlevel_idcまでの3バイト（前のPLIdと等しい）でなければなりません.

有益な注意：このパラメータにより、SDPオファー/アンサーの効率的なレベルダウングレードまたはアップグレードと、パラメータセットの帯域外転送が同時に可能になります.

use-level-src-parameter-sets：このパラメーターは、レシーバー機能を示すために使用できます（MAY）.値は0または1のいずれかに等しい場合があります.パラメーターが存在しない場合、値は0に等しいと推測される必要があります.値0は、受信者がsprop-level-parameter-setsパラメーターを理解していないことを示します. [9]のセクション6.3で指定されている「fmtp」ソース属性を理解せず、存在する場合はsprop-level-parameter-setsを無視し、「fmtp」ソース属性を使用して伝達される場合はsprop-parameter-setsを無視します.値1は、受信者がsprop-level-parameter-setsパラメーターを理解し、[9]のセクション6.3で指定されている「fmtp」ソース属性を理解することを示します.

情報メモ：RFC 3984レシーバーは、[9]のセクション6.3で指定されているように、sprop-level-parameter-sets、use-level-src-parameter-sets、または「fmtp」ソース属性を理解しません.したがって、SDPオファー/アンサーの間、アンサーとしてのRFC 3984レシーバーは、オファーに存在する場合はsprop-level-parameter-setsを無視し、セクション6.3で指定されているように「fmtp」ソース属性を使用して伝達されるsprop-parameter-setsを無視します. [9]の.提供されたペイロードタイプがデフォルトレベルよりも低いレベルで受け入れられたと想定します.提供されたペイロードタイプに「fmtp」ソース属性を使用して伝達されたsprop-level-parameter-setsまたは含まれたsprop-parameter-setsが含まれ、提供者が応答者に次の等しいuse-level-src-parameter-setsが含まれていないことを確認した場合答えの1、

in-band-parameter-sets：このパラメータは、受信機の機能を示すために使用できます.値は0または1のいずれかに等しい場合があります.値1は、レシーバーがsprop-parameter-setsおよびsprop-level-parameter-setsの帯域外パラメーターセットを破棄することを示します.したがって、送信者はすべてのパラメータセットを帯域内で送信する必要があります.値0は、受信機が帯域外パラメータセットを利用していることを示します

sprop-parameter-setsおよび/またはsprop-level-parameter-setsに含まれています.ただし、この場合、送信者はパラメータセットを帯域内で送信することを選択できます（MAY）.in-band-parameter-setsが1に等しい場合、use-level-src-parameter-setsは存在してはならないか、0に等しくなければなりません.パラメーターが存在しない場合、このレシーバー機能は指定されないため、送信者は、帯域外パラメータセットのみを送信するか、帯域内パラメータセットのみを送信するか、または両方を送信することができます.

level-asymmetry-allowed：このパラメーターをSDPオファー/アンサーで使用して、レベルの非対称性、つまり、提供者から回答者の方向で、回答者から提供者の方向のレベルとは異なるレベルでエンコードされたメディアを送信するかどうかを示すことができます. 、 許可されている.値は0または1のいずれかに等しい場合があります.パラメーターが存在しない場合、値は0に等しいと推測される必要があります.オファーとアンサーの両方の値1は、レベルの非対称性が許可されることを示します.オファーまたはアンサーのいずれかの値0は、レベルの非対称性が許可されていないことを示します.

level-asymmetry-allowedがオファーまたはアンサーのいずれかで0に等しい（または存在しない）場合、レベルの非対称性は許可されません.この場合、提供者から回答者への方向で使用するレベルは、反対方向で使用するレベルと同じでなければなりません.

packetization-mode：このパラメーターは、R​​TPペイロードタイプのプロパティまたはレシーバー実装の機能を通知します.単一の構成ポイントのみを示すことができます.したがって、複数のパケット化モードをサポートする機能を宣言する場合は、複数の構成ポイント（RTPペイロードタイプ）を使用する必要があります.

packetization-modeの値が0に等しい場合、またはpacketization-modeが存在しない場合は、単一のNALモードを使用する必要があります.このモードは、ITU-T勧告H.241 [3]を使用する標準で使用されています（セクション12.1を参照）.packetization-modeの値が1に等しい場合、非インターリーブモードを使用する必要があります.packetization-modeの値が2に等しい場合、インターリーブモードを使用する必要があります.packetization-modeの値は、0から2までの範囲の整数でなければなりません.

sprop-interleaving-depth：packetization-modeが存在しない場合、またはpacketization-modeの値が0または1に等しい場合、このパラメーターは存在してはなりません.packetization-modeの値が2に等しい場合、このパラメーターは存在しなければなりません.

このパラメータは、RTPパケットストリームのプロパティを通知します.これは、RTPパケットストリーム内の任意のVCL NALユニットの前に送信順序で、VCLNALユニットの後にデコード順序で続くVCNLALユニットの最大数を指定します.したがって、NALユニットのデコード順序回復のバッファサイズが少なくともVCL NALユニットに関してsprop-interleaving-depth + 1の値である場合、レシーバはNALユニットのデコード順序を再構築できることが保証されます.

sprop-interleaving-depthの値は、0から32767までの範囲の整数でなければなりません.

sprop-deint-buf-req：このパラメーターは、packetization-modeが存在しない場合、またはpacketization-modeの値が0または1に等しい場合に存在してはなりません.packetization-modeの値が2に等しい場合に存在しなければなりません. .

sprop-deint-buf-reqは、RTPパケットストリームに必要なデインターリーブバッファのサイズを通知します.パラメータの値は、セクション7.2で指定されているようなデインターリーブバッファで必要な最大バッファ占有率（バイト単位）以上である必要があります.デインターリーブバッファサイズが少なくともバイト単位のsprop-deint-buf-reqの値である場合、レシーバはインターリーブされたNALユニットのNALユニットのデコード順序へのデインターリーブを実行できることが保証されます.

sprop-deint-buf-reqの値は、0から4294967295までの範囲の整数でなければなりません.

情報メモ：sprop-deint-buf-reqは、インターリーブ解除バッファーの必要なサイズのみを示します.ネットワークジッターが発生する可能性がある場合は、適切なサイズのジッターバッファーもプロビジョニングする必要があります.

deint-buf-cap：このパラメーターは、レシーバー実装の機能を通知し、レシーバーがNALユニットのデコード順序を再構築するために使用できるバイト単位のデインターリーブバッファースペースの量を示します.レシーバーは、sprop-deint-buf-reqパラメーターの値がこのパラメーター以下であるすべてのストリームを処理できます.

パラメータが存在しない場合は、deint-buf-capに値0を使用する必要があります.deint-buf-capの値は、0から4294967295までの範囲の整数でなければなりません.

情報メモ：deint-buf-capは、レシーバーのみのデインターリーブバッファーの可能な最大サイズを示します.ネットワークジッターが発生する可能性がある場合は、適切なサイズのジッターバッファーもプロビジョニングする必要があります.

sprop-init-buf-time：このパラメータは、RTPパケットストリームのプロパティを通知するために使用できます.packetization-modeの値が0または1に等しい場合、パラメーターは存在してはなりません（MUSTNOT）.

このパラメータは、NALユニットのデコード順序を送信順序から回復するために、受信者がデコードを開始する前に待機しなければならない初期バッファリング時間を通知します.パラメータは、（NALユニットのデコード時間-NALユニットの送信時間）の最大値であり、信頼性が高く瞬時の送信、送信とデコードの同じタイムライン、および最初のパケットが到着したときのデコードの開始を想定しています.

sprop-init-buf-timeの値を指定する例を次に示します.NALユニットストリームは、次のインターリーブされた順序で送信されます.値はデコード時間に対応し、送信順序は左から右です.

0 2 1 3 5 4 6 8 7...

NALユニットの伝送速度が安定していると仮定すると、伝送時間は次のようになります.

0 1 2 3 4 5 6 7 8...

送信時間からデコード時間を列ごとに引くと、次のシリーズになります.

0 -1 1 0 -1 1 0 -1 1...

したがって、NALユニットの送信時間の間隔に関して、この例のsprop-init-buf-timeの値は1です.パラメータは、90kHzクロックのクロックティックで非負のbase10整数表現としてコード化されます.パラメータが存在しない場合、初期バッファリング時間の値は定義されていません.それ以外の場合、sprop-init-buf-timeの値は、0から4294967295までの範囲の整数でなければなりません.

信号のsprop-init-buf-timeに加えて、受信機は、ミキサー、トランスレーター、ゲートウェイ、プロキシ、トラフィックシェイパー、およびその他のネットワーク要素によって引き起こされる遅延ジッターのバッファリングを含む、伝送遅延ジッターのバッファリングを考慮に入れる必要があります.

sprop-max-don-diff：このパラメータは、RTPパケットストリームのプロパティを通知するために使用できます.送信機、受信機、またはコーデックの機能を通知するために使用してはなりません.packetization-modeの値が0または1に等しい場合、パラメーターは存在してはなりません.sprop-max-don-diffは、0から32767までの範囲の整数です.sprop-max-don-diffが存在しない場合、パラメーターの値は指定されていません.sprop-max-don-diffは次のように計算されます.

sprop-max-don-diff = max {AbsDON（i）-AbsDON（j）}、任意のiおよび任意のj> iについて、

ここで、iとjは送信順序でのNALユニットのインデックスを示し、AbsDONは65535以降に0にラップアラウンドしないNALユニットのデコード順序番号を示します.つまり、AbsDONは次のように計算されます.mとn送信順に連続したNALユニットである.送信順序の最初のNALユニット（インデックスが0）の場合、AbsDON（0）= DON（0）.他のNALユニットの場合、AbsDONは次のように計算されます.

            DON（m）== DON（n）の場合、AbsDON（n）= AbsDON（m）
        
            （DON（m）<DON（n）およびDON（n）-DON（m）<32768）の場合、
              AbsDON（n）= AbsDON（m）+ DON（n）-DON（m）
        
            （DON（m）> DON（n）およびDON（m）-DON（n）> = 32768）の場合、
              AbsDON（n）= AbsDON（m）+ 65536-DON（m）+ DON（n）
        
            （DON（m）<DON（n）およびDON（n）-DON（m）> = 32768）の場合、
              AbsDON（n）= AbsDON（m）-（DON（m）+ 65536-DON（n））
        
            （DON（m）> DON（n）およびDON（m）-DON（n）<32768）の場合、
              AbsDON（n）= AbsDON（m）-（DON（m）-DON（n））
        
ここで、DON（i）は、送信順序にインデックスiを持つNALユニットのデコード順序番号です.デコード順序番号はセクション5.5で指定されています.

情報メモ：レシーバーは、sprop-max-don-diffを使用して、レシーバーバッファー内のどのNALユニットをデコーダーに渡すことができるかをトリガーできます.

max-rcmd-nalu-size：このパラメータは、受信機の機能を通知するために使用できます.パラメータを他の目的に使用してはなりません（MUSTNOT）.パラメータの値は、受信者が効率的に処理できる最大のNALUサイズをバイト単位で示します.パラメータ値は推奨値であり、厳密な上限ではありません.送信者はより大きなNALUを作成できますが、これらの処理には制限に準拠したNALUよりもコストがかかる可能性があることに注意する必要があります.

max-rcmd-nalu-sizeの値は、0から4294967295までの範囲の整数でなければなりません.このパラメーターが指定されていない場合、NALUサイズに対する既知の制限はありません.送信者は、送信者と受信者の間で利用可能なMTUサイズを考慮する必要があり、この目的のためにMTU検出を実行する必要があります.

このパラメータは、たとえば、IPからH.223へのビデオテレフォニーゲートウェイによって動機付けられます.この場合、H.223トランスポートデータユニットよりも小さいNALUの方が効率的です.ゲートウェイはIPを終了する場合があります.したがって、MTUディスカバリーは通常、ゲートウェイを超えて機能しません.

注意事項：このパラメーターを必要な値よりも低く設定すると、悪影響が生じる可能性があります.

sar-understood：このパラメーターは、レシーバー機能のみを示すために使用できます.このパラメーターは、受信者が理解できる255未満のaspect_ratio_idc（[1]で指定）の最大値を示します.[1]の表E-1は、0に等しいaspect_ratio_idcを「未指定」として指定しています.特定のサンプルアスペクト比（SAR）として1から16まで.「予約済み」として17から254まで.拡張SARとして255があり、SAR幅とSAR高さが明示的に通知されます.したがって、[1]に準拠したデコーダーを備えたレシーバーは、SARが何であるかを正確に認識しているという意味で、1〜16の範囲のaspect_ratio_idcと255に等しいaspect_ratio_idcを理解します.このような受信機の場合、sar-understandの値は16です.将来、[1]の表E-1が拡張された場合、たとえば、

sar-understoodは17です.[1]の2003バージョンによるデコーダーを備えたレシーバーの場合、sar-understoodの値は13です.これは、その中の最小予約アスペクト比_ratio_idcが14であるためです.

sar-understandedが存在しない場合、値は13に等しいと推測されなければなりません.

sar-supported：このパラメーターは、レシーバー機能のみを示すために使用できます.このパラメータの値は、1からsarまでの範囲の整数（255を含む）です.255未満のNに等しいsar-supportedの値は、受信機がH.264アスペクト比_idcに対応するすべてのSARをサポートすることを示します.幾何学的歪みのない、1からNまでの範囲の値（[1]の表E-1を参照）.sar-supportedの値が255に等しい場合、レシーバーは、分子と分母として2つの16ビット整数値を使用して表現できるすべてのサンプルアスペクト比をサポートします.つまり、H.264アスペクト比_idc値255（ Extended_SAR、[1]の表E-1を参照）、幾何学的歪みなし.

H.264準拠のエンコーダーは、0に等しいaspect_ratio_idc、またはsar-understandより大きく255より小さいaspect_ratio_idcを送信しないでください.H.264準拠のエンコーダーは、レシーバーが幾何学的歪みなしで表示できるaspect_ratio_idcを送信する必要があります.ただし、H.264準拠のエンコーダーは、任意のSARを使用して画像を送信することを選択できます（MAY）.

ストリームの実際のサンプルアスペクト比または拡張サンプルアスペクト比が存在する場合は、シーケンスパラメータセットのビデオユーザビリティ情報（VUI）部分で伝達されることに注意してください.

エンコーディングに関する考慮事項：このタイプは、RTP（RFC 3550）を介した転送に対してのみ定義されています.

セキュリティに関する考慮事項：RFC6184のセクション9を参照してください.

公開仕様：RFC6184とそのセクション17を参照してください.

追加情報：なし

ファイル拡張子：なし

Macintoshファイルタイプコード：なし

オブジェクト識別子またはOID：なし

詳細について連絡する人と電子メールアドレス：Ye-Kui Wang、yekui.wang @ huawei.com

使用目的：COMMON

著者：Ye-Kui Wang、yekui.wang @ huawei.com

コントローラーの変更：IESGから委任されたIETFオーディオ/ビデオトランスポートワーキンググループ.

8.2.SDPパラメータ
受信者は、このメモで指定されていないパラメータを無視する必要があります.

8.2.1.ペイロードタイプパラメータのSDPへのマッピング
メディアタイプvideo / H264文字列は、次のようにSession Description Protocol（SDP）[6]のフィールドにマップされます.

oSDPの「m =」行のメディア名はビデオである必要があります.

oSDPの「a = rtpmap」行のエンコード名はH264（メディアサブタイプ）である必要があります.

o「a = rtpmap」行のクロックレートは90000でなければなりません.

oオプションのパラメーターprofile-level-id、max-recv-level、max-mbps、max-smbps、max-fs、max-cpb、max-dpb、max-br、redundant-pic-cap、use-level- src-parameter-sets、in-band-parameter-sets、level-asymmetry-allowed、packetization-mode、sprop-interleaving-depth、sprop-deint-buf-req、deint-buf-cap、sprop-init-buf- time、sprop-max-don-diff、max-rcmd-nalu-size、sar-understood、およびsar-supportedが存在する場合は、SDPの「a = fmtp」行に含める必要があります.これらのパラメーターは、パラメーター=値のペアのセミコロンで区切られたリストの形式で、メディアタイプ文字列として表されます.

oオプションのパラメータsprop-parameter-setsおよびsprop-level-parameter-setsが存在する場合は、SDPの「a = fmtp」行に含めるか、[のセクション6.3で指定されている「fmtp」ソース属性を使用して伝達する必要があります. 9].特定のメディア形式（つまり、RTPペイロードタイプ）の場合、sprop-parameter-setsまたはsprop-level-parameter-setsの両方をの「a = fmtp」行に含めてはなりません.

SDPであり、「fmtp」ソース属性を使用して伝達されます.SDPの「a = fmtp」行に含まれている場合、これらのパラメーターは、パラメーター=値のペアのセミコロン区切りリストの形式で、メディアタイプ文字列として表されます.「fmtp」ソース属性を使用して伝達される場合、これらのパラメーターは、「fmtp」ソース属性の一部として、指定されたソースおよびペイロードタイプにのみ関連付けられます.

有益な注意：「fmtp」ソース属性を使用したsprop-parameter-setsおよびsprop-level-parameter-setsの伝達により、Topo-Video-switch-MCU [29]などのトポロジでパラメーターセットの帯域外転送が可能になります.

SDPでのメディア表現の例は次のとおりです（ベースラインプロファイル、レベル3.0、メインプロファイルの制約の一部に従わない場合があります）.

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E;
                packetization-mode = 1;
                sprop-parameter-sets = <パラメータセットデータ>
        
8.2.2.SDPオファー/アンサーモデルでの使用
ユニキャスト使用のネゴシエーションのためにオファー/アンサーモデル[8]でSDPを使用してRTPを介してH.264が提供される場合、次の制限とルールが適用されます.

o H.264のメディアフォーマット構成を識別するパラメーターは、profile-level-idとpacketization-modeです.これらのメディアフォーマット構成パラメーター（profile-level-idのレベル部分を除く）は、対称的に使用する必要があります.つまり、1つ以上のパラメーター値がサポートされていない場合、アンサーはすべての構成パラメーターを維持するか、メディア形式（ペイロードタイプ）を完全に削除する必要があります.profile-level-idのレベル部分にはlevel_idcが含まれ、profile_idcが66、77、または88に等しい場合のレベル1bを示すために、profile-iopのビット4（constraint_set3_flag）に注意してください.profile-level-idのレベル部分は変更可能です.

情報メモ：対称使用の要件は、profile-level-idのレベル部分には適用されず、他のストリームプロパティおよび機能パラメータにも適用されません.

情報メモ：H.264 [1]では、レベル1bを除くすべてのレベルは、level_idcの値を10で割った値に等しくなります.レベル1bは、レベル1.0より高いがレベル1.1より低いレベルであり、アドホックで通知されます.マナー、レベルがあったので

レベル1.0およびレベル1.1の後に指定されます.ベースライン、メイン、および拡張プロファイル（profile_idcがそれぞれ66、77、および88に等しい）の場合、レベル1bはlevel_idcが11に等しい（つまり、レベル1.1と同じ）およびconstraint_set3_flagが1に等しいことで示されます.他のプロファイルの場合、レベル1bは9に等しいlevel_idcで示されます（ただし、これらのプロファイルのレベル1bは、レベル1よりも高く、level_idcは10に等しく、レベル1.1よりも低いことに注意してください）.SDPオファー/アンサーでは、オファーへの回答は、オファーに示されているレベル以下のレベルを示している場合があります.レベル1bのアドホック表示により、profile_idcが66、77、または88に等しく、level_idcがである場合、提供者と回答者は、パラメーターprofile-level-idの中央オクテットのビット4（constraint_set3_flag）の値を確認する必要があります. 11に等しい.

これらの構成の処理と照合を簡素化するために、[8]で指定されているように、オファーで使用されているのと同じRTPペイロードタイプ番号を回答でも使用する必要があります.構成がオファーとまったく同じでない限り、回答にオファーで使用されるペイロードタイプ番号を含めてはなりません（MUSTNOT）.

情報提供者は、回答を受け取ったときに、メディアタイプ（つまり、ビデオ/ H264）および上記のメディア構成パラメーターに基づいてオファーで宣言されていないペイロードタイプを、すでに宣言されているペイロードタイプと比較する必要があります.これにより、問題の構成が新しいかどうか、またはすでに提供されている構成と同等かどうかを判断できます.これは、回答で異なるペイロードタイプ番号が使用されている可能性があるためです.

o存在する場合、パラメーターmax-recv-levelは、受信がサポートされている最高レベルを宣言します.max-recv-levelが存在しない場合、受信用にサポートされている最高レベルは、profile-level-idのレベル部分で示されるデフォルトレベルと同じです.存在する場合、max-recv-levelはデフォルトレベルより高くなければなりません.

oパラメーターlevel-asymmetry-allowedは、レベルの非対称性が許可されるかどうかを示します.

level-asymmetry-allowedがオファーまたはアンサーのいずれかで0に等しい（または存在しない）場合、レベルの非対称性は許可されません.この場合、提供者から回答者への方向で使用するレベルは、反対方向で使用するレベルと同じである必要があり、使用する共通レベルは、オファーのデフォルトレベルの低い方の値と同じです.そして答えのデフォルトレベル.

それ以外の場合、level-asymmetry-allowedはオファーとアンサーの両方で1に等しく、レベルの非対称性が許可されます.この場合、提供者から回答者への方向で使用するレベルは、回答者が受信をサポートする最高レベルと等しくなければならず、回答者から提供者への方向で使用するレベルは、最高レベルと等しくなければなりません.提供者は受信をサポートします.

レベルの非対称性が許可されていない場合、レベルのアップグレードは許可されません.つまり、回答のデフォルトレベルは、オファーのデフォルトレベル以下である必要があります.

oパラメータsprop-deint-buf-req、sprop-interleaving-depth、sprop-max-don-diff、およびsprop-init-buf-timeは、提供者または応答者が送信するRTPパケットストリームのプロパティを記述します.メディアフォーマット設定.これは、オファー/アンサーパラメーターの通常の使用法とは異なります.通常、このようなパラメーターは、オファー側またはアンサー側が受信できるストリームのプロパティを宣言します.H.264を扱う場合、提供者は、提供されている構成を使用してエンコードされたメディアを回答者が受信できると想定します.

情報注記：上記のパラメーターは、同じ構成の宣言エンティティによって送信されるすべてのストリームに適用されます.つまり、それらはソースに依存しています.値は、構成に適用されるため、ペイロードタイプにバインドされるのではなく、送信時に別のペイロードタイプに適用される必要がある場合があります.

o機能パラメーターmax-mbps、max-smbps、max-fs、max-cpb、max-dpb、max-br、redundant-pic-cap、max-rcmd-nalu-size、sar-understood、およびsar-supported受信するための提供者または回答者のさらなる機能を宣言するために使用される場合があります.方向属性が「送信専用」であり、パラメーターが提供者または回答者がストリームの受信に受け入れるものの制限を記述している場合、これらのパラメーターは存在してはなりません（MUSTNOT）.

oオファー側は、インターリーブされたH.264ストリームのオファーに、インターリーブ解除バッファーのサイズsprop-deint-buf-reqを含める必要があります.提供者と回答者が受信ストリームでのバッファリングのインターリーブ解除機能について相互に通知できるようにするには、両方の当事者にdeint-buf-capを含めることをお勧めします.インターリーブされたストリームの場合、レシーバーの機能が不明な場合は、異なるバッファリング要件を持つ複数のペイロードタイプを提供することを検討することもお勧めします.

o sprop-parameter-setsまたはsprop-level-parameter-setsパラメーターが存在する場合（SDPの「a = fmtp」行に含まれるか、のセクション6.3で指定されている「fmtp」ソース属性を使用して伝達される）

[9]）、パラメータセットの帯域外転送に使用されます.ただし、パラメータセットの帯域外転送が使用されている場合でも、パラメータセットは追加で帯域内に転送される場合があります.

応答者は、送信者から応答者への方向で帯域外パラメータセットトランスポートが使用されているかどうかに関係なく、送信するストリームのパラメータセットの帯域外または帯域内トランスポートのいずれかを使用できます（MAY）.回答に含まれるパラメータセットは、2つの異なるビデオストリームをデコードするために使用されるため、オファーに含まれるパラメータセットとは無関係です.1つは回答者から提供者へ、もう1つは反対方向です.

以下のルールは、提供者から回答者への方向でのパラメータセットの転送に適用されます.

oオファーには、sprop-parameter-setsとsprop-level-parameter-setsのいずれかまたは両方が含まれる場合があります.sprop-parameter-setsもsprop-level-parameter-setsもオファーに存在しない場合、パラメーターセットのインバンドトランスポートのみが使用されます.

o回答に1に等しい帯域内パラメータセットが含まれている場合、提供者はパラメータセットを帯域内で送信する必要があります.それ以外の場合は、以下が適用されます.

o提供者から回答者への方向で使用するレベルが、オファーのデフォルトレベルと等しい場合、以下が適用されます.

オファーの「a = fmtp」行にsprop-parameter-setsが含まれている場合、応答者は、着信NALユニットストリームをデコードするためにsprop-parameter-setsに含まれているパラメータセットを使用する準備をしなければなりません.

オファーに「fmtp」ソース属性を使用して伝達されるsprop-parameter-setsがある場合、以下が適用されます.回答に1に等しいuse-level-src-parameter-setsまたは「fmtp」ソース属性が含まれている場合、回答者は、着信NALユニットストリームをデコードするためにsprop-parameter-setsに含まれているパラメータセットを使用する準備をしなければなりません.それ以外の場合、提供者はパラメータセットを帯域内で送信する必要があります.

sprop-parameter-setsがオファーに存在しない場合、オファー側はパラメーターセットを帯域内で送信する必要があります.

回答者は、オファーに存在する場合（「a = fmtp」行に含まれるか、「fmtp」ソース属性を使用して伝達される）、sprop-level-parameter-setsを無視する必要があります.

oそれ以外の場合、オファー提供者から回答者への方向で使用するレベルは、オファーのデフォルトレベルと等しくなく、以下が適用されます.

回答者は、オファーに存在する場合（「a = fmtp」行に含まれるか、「fmtp」ソース属性を使用して伝達される）、sprop-parameter-setsを無視する必要があります.

use-level-src-parameter-setsが1に等しくなく、「fmtp」ソース属性が回答に存在しない場合、回答者はオファーに存在する場合はsprop-level-parameter-setsを無視する必要があり、提供者はMUSTする必要があります.パラメータセットを帯域内で送信します.

use-level-src-parameter-setsが1に等しいか、「fmtp」ソース属性が回答に存在する場合、回答者は、sprop-level-parameter-setsに含まれているパラメータセットを使用する準備をしなければなりません.オファーに存在する場合、着信NALユニットストリームをデコードするための許容レベル（つまり、回答のデフォルトレベル）.sprop-level-parameter-setsに含まれる他のすべてのパラメーターセットを無視します.

オファーのsprop-level-parameter-setsに、オファー側からアンサー側の方向で使用するレベルのパラメーターセットが存在しない場合、オファー側はパラメーターセットを帯域内で送信する必要があります.

以下のルールは、アンサーからオファーへの方向でのパラメーターセットの転送に適用されます.

o回答には、sprop-parameter-setsまたはsprop-level-parameter-setsのいずれかを含めることができますが、両方を含めることはできません.sprop-parameter-setsもsprop-level-parameter-setsも回答に存在しない場合、パラメーターセットの帯域内転送のみが使用されます.

oオファーに1に等しい帯域内パラメーターセットが含まれている場合、回答者は回答にsprop-parameter-setsまたはsprop-level-parameter-setsを含めてはならず、パラメーターセットを帯域内で送信する必要があります.それ以外の場合は、以下が適用されます.

o回答者から提供者への方向で使用するレベルが回答のデフォルトレベルと等しい場合、以下が適用されます.

回答の「a = fmtp」行にsprop-parameter-setsが含まれている場合、提供者は、着信NALユニットストリームをデコードするためにsprop-parameter-setsに含まれているパラメータセットを使用する準備をしなければなりません.

回答に「fmtp」ソース属性を使用して伝達されるsprop-parameter-setsがある場合、以下が適用されます.オファーに1に等しいuse-level-src-parameter-setsまたは「fmtp」ソース属性が含まれている場合、オファー提供者は、着信NALユニットストリームをデコードするためにsprop-parameter-setsに含まれているパラメーターセットを使用する準備をしなければなりません.それ以外の場合、応答者はパラメータセットを帯域内で送信する必要があります.

sprop-parameter-setsがアンサーに存在しない場合、アンサーはパラメーターセットをインバンドで送信する必要があります.

提供者は、回答にsprop-level-parameter-setsが存在する場合（「a = fmtp」行に含まれるか、「fmtp」ソース属性を使用して伝達される）、無視する必要があります.

oそれ以外の場合、回答者から提供者への方向で使用するレベルは、回答のデフォルトレベルと等しくなく、以下が適用されます.

提供者は、回答に存在する場合（SDPの「a = fmtp」行に含まれるか、「fmtp」ソース属性を使用して伝達される）、sprop-parameter-setsを無視する必要があります.

use-level-src-parameter-setsが1に等しくなく、「fmtp」ソース属性がオファーに存在しない場合、オファー側はsprop-level-parameter-setsが存在する場合はそれを無視する必要があり、応答側はパラメーターセットを送信する必要があります.インバンド.

use-level-src-parameter-setsが1に等しいか、「fmtp」ソース属性がオファーに存在する場合、オファー提供者は、sprop-level-に含まれているパラメーターセットを使用する準備をしなければなりません.

回答に存在する場合、着信NALユニットストリームをデコードするために回答者から提供者への方向で使用するレベルのパラメータセット.回答のsprop-level-parameter-setsに含まれる他のすべてのパラメータセットを無視します.

回答者から提供者への方向で使用するレベルのパラメータセットが回答のsprop-level-parameter-setsに存在しない場合、回答者はパラメータセットを帯域内で送信する必要があります.

[9]のセクション6.3で指定されている「fmtp」ソース属性を使用してsprop-parameter-setsまたはsprop-level-parameter-setsが伝達される場合、パラメーターの受信者は、sprop-parameter-に含まれるパラメーターセットを格納する必要があります.受け入れられたレベルのセットまたはsprop-level-parameter-setsを設定し、それらを「fmtp」ソース属性の一部として指定されたソースに関連付けます.1つのソースに関連付けられたパラメータセットは、同じソースからのRTPパケットで伝達されるNALユニットをデコードするためにのみ使用する必要があります.このメカニズムを使用する場合、SSRC衝突検出と解決は[9]で指定されているように実行する必要があります.

有益な注意：「fmtp」ソース属性を使用したsprop-parameter-setsおよびsprop-level-parameter-setsの伝達は、Topo-Video-switch-MCU [29]などのトポロジで使用され、帯域外転送を有効にすることができます.パラメータセット.

マルチキャストで配信されるストリームには、次のルールが適用されます.

oメディア形式の構成は、レベル部分を含む「profile-level-id」とパケット化モードによって識別されます.これらのメディアフォーマット構成パラメーター（profile-level-idのレベル部分を含む）は、対称的に使用する必要があります.つまり、アンサーはすべての構成パラメーターを維持するか、メディア形式（ペイロードタイプ）を完全に削除する必要があります.これは、マルチキャストのOffer / Answerのprofile-level-idのレベル部分が変更できないことを意味することに注意してください.

これらの構成の処理と照合を簡素化するために、[8]で指定されているように、オファーで使用されているのと同じRTPペイロードタイプ番号を回答でも使用する必要があります.構成がオファーと同じでない限り、回答にオファーで使用されるペイロードタイプ番号を含めてはなりません（MUSTNOT）.

o受信したパラメータセットは、発信元のソースに関連付けられている必要があり、同じソースからの着信NALユニットストリームのデコードにのみ使用されている必要があります.

o他のパラメーターの規則は、上記の規則に従っている限り、ユニキャストの場合と同じです.

表6に、さまざまな方向属性に使用する必要のあるすべてのメディアタイプパラメーターの解釈を示します.

表6.さまざまな方向属性のパラメーターの解釈

                                              sendonly- +
                                           recvonly- + |
                                        sendrecv- + | |
                                                   | | |
                プロファイルレベルIDCCP
                max-recv-levelRR-
                パケット化モードCCP
                sprop-deint-buf-req P-P
                sprop-interleaving-depth P-P
                sprop-max-don-diff P-P
                sprop-init-buf-time P-P
                max-mbpsRR-
                max-smbpsRR-
                max-fsRR-
                max-cpbRR-
                max-dpbRR-
                max-br RR-
                冗長-pic-capRR-
                deint-buf-capRR-
                max-rcmd-nalu-sizeRR-
                sar-理解されたRR-
                sar-サポートされているRR-
                インバンドパラメータセットRR-
                use-level-src-parameter-sets RR-
                レベル-非対称性-許可されたO--
                sprop-parameter-sets S-S
                sprop-level-parameter-sets S-S
        
伝説：

             C：ストリームを送受信するための構成
             O：オファー/アンサーモード
             P：送信されるストリームのプロパティ
             R：レシーバー機能
             S：帯域外パラメータセット
             -：使用できません（存在する場合は無視する必要があります）
        
レシーバー機能の宣言に使用されるパラメーターは、一般にダウングレード可能です.つまり、送信者の可能な動作の上限を表します.したがって、送信者は、これらのパラメータのより低い/より少ないまたは等しい値のみを使用してエンコーダを設定することを選択できます（MAY）.

ユニキャストで使用するprofile-level-idパラメーターのlevel部分を除いて、構成ポイントを宣言するパラメーターは変更できません.

送信者の機能が宣言され、この宣言でダウングレード不可能なパラメーターが使用されている場合、これらのパラメーターは、送信者がストリームを受信するために受け入れられる構成を表します.高い相互運用性レベルを実現するために、たとえばパケット化モードなど、複数の代替構成を提供することをお勧めします.1つのペイロードタイプで複数の構成を提供することはできません.したがって、複数の構成オファーが行われる場合、各オファーには、オファーに関連付けられた独自のRTPペイロードタイプが必要です.

受信者は、ペイロード形式の機能のサブセットのみをサポートしている場合でも、すべてのメディアタイプパラメータを理解する必要があります.これにより、受信者は、メディアを受信するオファーを、オファーの受信者がサポートするものにダウングレードできる時期を理解できるようになります.

回答者は、追加のメディア形式構成でオファーを拡張できます（MAY）.ただし、それらを使用できるようにするには、ほとんどの場合、メディア送信者が使用するストリームプロパティパラメータを提供するために、提供者から2番目のオファーが必要です.これには、提供者が送信するだけでなく、このメディア形式の構成を受信できる必要があるという効果もあります.

提供者が送信と受信の間に非対称機能を持ちたい場合、提供者はレベル非対称性を介して非対称レベルを許可できます-1に等しいことが許可されます.あるいは、提供者は異なるRTPセッション、つまり「」として宣言された異なるメディアラインを提供できます.それぞれ、recvonly」と「sendonly」.これはシステムにさらに影響を与える可能性があり、2つのメディアラインを関連付けるために追加の外部セマンティクスが必要になる場合があります.

8.2.3.宣言型セッション記述での使用法
リアルタイムストリーミングプロトコル（RTSP）[27]やセッションアナウンスメントプロトコル（SAP）[28]のように、H.264 over RTPが宣言型のSDPで提供される場合、次の考慮事項が必要です.

oストリームプロパティとレシーバー機能の両方を示すことができるすべてのパラメーターは、ストリームプロパティのみを示すために使用されます.たとえば、この場合、パラメータprofile-level-idは、ストリームを受信する機能ではなく、ストリームで使用される値のみを宣言します.この結果、次のパラメータの解釈を使用する必要があります.

実際の構成またはストリームプロパティの宣言：

--profile-level-id --packetization-mode --sprop-interleaving-depth --sprop-deint-buf-req --sprop-max-don-diff --sprop-init-buf-time

パラメータセットの帯域外転送：

--sprop-parameter-sets--sprop-level-parameter-sets

使用できません（存在する場合、無視する必要があります）：

--max-mbps --max-smbps --max-fs --max-cpb --max-dpb --max-br --max-recv-level --redundant-pic-cap --max-rcmd-nalu-size --deint-buf-cap --sar-理解済み--sar-supported--帯域内パラメータセット--level-asymmetry-allowed--use-level-src-parameter-sets

o SDPの受信者は、提供されたすべてのパラメーターとパラメーターの値をサポートする必要があります.それ以外の場合、受信者はセッションを拒否（RTSP）するか、セッションに参加しない（SAP）必要があります.受信側アプリケーションでサポートされることが期待される値を使用するのは、セッションの作成者にあります.

8.3.例
両方の当事者が送信と受信の両方を期待されるSDPオファー/アンサー交換は、次のようになります.SDPのメディアコーデック固有の部分のみが示されています.テキストの制約により、一部の行が折り返されています.

提供者->回答者SDPメッセージ：

      m =ビデオ49170RTP / AVP 100 99 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; packetization-mode = 0;
        sprop-parameter-sets = <パラメータセットデータ＃0>
      a = rtpmap：99 H264 / 90000
      a = fmtp：99 profile-level-id = 42A01E; packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃1>
      a = rtpmap：100 H264 / 90000
      a = fmtp：100 profile-level-id = 42A01E; packetization-mode = 2;
        sprop-parameter-sets = <パラメータセットデータ＃2>;
        sprop-interleaving-depth = 45; sprop-deint-buf-req = 64000;
        sprop-init-buf-time = 102478; deint-buf-cap = 128000
        
上記のオファーは、3つの異なるパケット化形式で同じコーデック構成を示しています.ペイロードタイプ98はシングルNALUモードを表し、ペイロードタイプ99は非インターリーブモードを表し、ペイロードタイプ100はインターリーブモードを表します.インターリーブモードの場合、回答がペイロードタイプ100のサポートを示している場合に提供者が使用するインターリーブパラメータも含まれます.3つのケースすべてで、パラメーターsprop-parameter-setsは、この構成が受け入れられたときに提供者からストリームを受信するときに応答者が必要とする初期パラメーターセットを伝達します.sprop-parameter-setsの値は、ペイロードタイプごとに異なる可能性があることに注意してください.

回答者->提供者SDPメッセージ：

      m =ビデオ49170RTP / AVP 100 99 97
      a = rtpmap：97 H264 / 90000
      a = fmtp：97 profile-level-id = 42A01E; packetization-mode = 0;
        sprop-parameter-sets = <パラメータセットデータ＃3>
      a = rtpmap：99 H264 / 90000
      a = fmtp：99 profile-level-id = 42A01E; packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃4>;
        max-rcmd-nalu-size = 3980
      a = rtpmap：100 H264 / 90000
      a = fmtp：100 profile-level-id = 42A01E; packetization-mode = 2;
        sprop-parameter-sets = <パラメータセットデータ＃5>;
        sprop-interleaving-depth = 60;
        sprop-deint-buf-req = 86000; sprop-init-buf-time = 156320;
        deint-buf-cap = 128000; max-rcmd-nalu-size = 3980
        
オファー/アンサーネゴシエーションはストリームの送信と受信の両方を対象としているため、オファーは、オファー側が受信しようとしているものの正確なパラメーターを示しますが、アンサーは、回答者が受信しようとしているものについて同じことを示します.この場合、提供者はペイロードタイプ98を受け取る用意があると宣言しました.回答者は同等のペイロードタイプ97を宣言することでこれを受け入れます.つまり、2つのパラメーターprofile-level-idとpacketization-modeの値は同じです（packetization-modeが0に等しく、sprop-deint-buf-reqが存在しないため）.提供されたペイロードタイプ98が受け入れられると、応答者は、提案が最終的にこの構成を使用することを決定した場合に備えて、sprop-parameter-sets = <parameter sets data＃0>に含まれるパラメーターセットを格納する必要があります.答えでは、

   回答者は、2つの構成の受信も受け入れます
   そのペイロードタイプ99と100が表します.繰り返しますが、回答者は
   sprop-parameter-sets = <parameterに含まれるパラメーターセットを格納する
   場合に備えて、データ＃1>とsprop-parameter-sets = <パラメータセットデータ＃2>を設定します
   オファーは最終的に、これら2つの構成のいずれかを使用することを決定します.
   回答者は、回答者から-への初期パラメータセットを提供します.
   提供者の方向、つまり、sprop-parameter-のパラメータセット
   sets = <パラメータセットdata＃4>およびsprop-parameter-sets = <パラメータセット
   data＃5>、ペイロードタイプ99および100の場合、それぞれ使用します
   ペイロードタイプを送信します.回答者は提供者も提供します
   を提供することにより、インターリーブ解除操作のメモリ制限があります.
   deint-buf-capパラメーター.これは、提供者が決定した場合にのみ役立ちます
   新しい価値を取り入れることができる2番目のオファーを行う際に
        
アカウント.max-rcmd-nalu-sizeは、アンサーが3980バイトのサイズまでのNALUを効率的に処理できることを示します.ただし、ネットワークがこのサイズをサポートするという保証はありません.

次の例では、オファーはレベルダウングレードなしで受け入れられ（つまり、デフォルトレベルのレベル3.0が受け入れられます）、sprop-parameter-setsとsprop-level-parameter-setsの両方がオファーに存在します.応答者は、着信NALユニットストリームをデコードするために、sprop-level-parameter-sets = <パラメータセットデータ＃1>を無視し、パラメータセットをsprop-parameter-sets = <パラメータセットデータ＃0>に格納する必要があります.提供者は、着信NALユニットストリームをデコードするための回答で、パラメータセットをsprop-parameter-sets = <パラメータセットデータ＃2>に格納する必要があります.この例では、sprop-parameter-sets = <parameter sets data＃2>のパラメーターセットをレベル3.0に関連付ける必要があることに注意してください.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃0>;
        sprop-level-parameter-sets = <パラメータセットデータ＃1>
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃2>
        
次の例では、オファー（ベースラインプロファイル、レベル1.1）がレベルダウングレードで受け入れられ（受け入れられるレベルはレベル1b）、sprop-parameter-setsとsprop-level-parameter-setsの両方がオファーに存在します.回答者は、sprop-parameter-sets = <パラメータセットデータ＃0>およびsprop-level-parameter-sets = <パラメータセットデータ＃1>の受け入れられたレベル（レベル1b）以外のすべてのパラメータセットを無視する必要があり、パラメータを格納する必要があります着信NALユニットストリームをデコードするためのsprop-level-parameter-sets = <parameter sets data＃1>の受け入れられたレベル（レベル1b）のセット.提供者は、着信NALユニットストリームをデコードするための回答で、パラメータセットをsprop-parameter-sets = <パラメータセットデータ＃2>に格納する必要があります.この例では、sprop-parameter-sets = <parameter sets data＃2>のパラメーターセットに注意してください.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A00B; //ベースラインプロファイル、レベル1.1
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃0>;
        sprop-level-parameter-sets = <パラメータセットデータ＃1>
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42B00B; //ベースラインプロファイル、レベル1b
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃2>;
        use-level-src-parameter-sets = 1
        
次の例では、オファー（ベースラインプロファイル、レベル1.1）がレベルダウングレードで受け入れられ（受け入れられるレベルはレベル1b）、sprop-parameter-setsとsprop-level-parameter-setsの両方がオファーに存在します.ただし、アンサーはレガシーRFC 3984実装であり、sprop-level-parameter-setsを理解していません.したがって、回答にはuse-level-src-parameter-sets（回答者も理解していません）は含まれていません.したがって、回答者はsprop-parameter-sets = <パラメータセットdata＃0>とsprop-level-parameter-sets = <パラメータセットdata＃1>の両方を無視する必要があり、提供者はパラメータセットを帯域内で転送する必要があります.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A00B; //ベースラインプロファイル、レベル1.1
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃0>;
        sprop-level-parameter-sets = <パラメータセットデータ＃1>
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42B00B; //ベースラインプロファイル、レベル1b
        packetization-mode = 1
        
次の例では、オファーはレベルダウングレードなしで受け入れられ、sprop-parameter-setsがオファーに存在します.sprop-parameter-sets = <パラメータセットdata＃0>のパラメータセットは、

提供者のエンコーダーと回答者のデコーダーによって保存および使用され、sprop-parameter-sets = <パラメーターセットデータ＃1>のパラメーターセットは、回答者のエンコーダーと提供者のデコーダーによって使用される必要があります.sprop-parameter-sets = <パラメータセットデータ＃0>は基本的にsprop-parameter-sets = <パラメータセットデータ＃1>から独立していることに注意してください.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃0>
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃1>
        
次の例では、オファーはレベルダウングレードなしで受け入れられ、sprop-parameter-setsもsprop-level-parameter-setsもオファーに存在しません.つまり、パラメーターセットの帯域外送信はありません.その後、帯域内で転送する必要があります.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1
        
次の例では、オファーはレベルダウングレードで受け入れられ、sprop-parameter-setsがオファーに存在します.sprop-parameter-sets = <parameter sets data＃0>にはレベル3.0を示すlevel_idcが含まれているため、回答者はレベル2.0を必要とし、回答者は無視する必要があり、帯域内パラメータセットを使用する必要があるため使用できません. .

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1;
        sprop-parameter-sets = <パラメータセットデータ＃0>
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A014; //ベースラインプロファイル、レベル2.0
        packetization-mode = 1
        
次の例では、オファーはレベルダウングレードでも受け入れられ、sprop-parameter-setsもsprop-level-parameter-setsもオファーに存在しません.つまり、パラメーターセットの帯域外送信はありません.その後、帯域内で転送する必要があります.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A014; //ベースラインプロファイル、レベル2.0
        packetization-mode = 1
        
次の例では、オファーはレベルアップグレードで受け入れられ、sprop-parameter-setsもsprop-level-parameter-setsもオファーまたはアンサーに存在しません.つまり、パラメーターの帯域外送信はありません.セットは、バンド内で転送する必要があります.提供者から回答者への方向で使用するレベルはレベル3.0であり、回答者から回答者への方向で使用するレベルです.

提供者の方向性はレベル2.0です.回答者はレベル2.0までの任意のレベルで送信でき、提供者はレベル3.0までの任意のレベルで送信できます.

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A014; //ベースラインプロファイル、レベル2.0
        packetization-mode = 1; level-asymmetry-allowed = 1
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1; level-asymmetry-allowed = 1
        
次の例では、提供者はTopo-Video-switch-MCU [29]のようなトポロジのマルチポイントコントロールユニット（MCU）であり、他の3人の参加者（B、 C、およびD）および応答者である参加者Aからパラメータセットを受信します.参加者は、さまざまなSSRC値にマップされている正規名（CNAME）の値によって識別されます.同じコーデック構成が4人の参加者全員によって使用されます.参加者Aは、<パラメータセットdata＃B>、<パラメータセットdata＃C>、および<パラメータセットdata＃D>に含まれるパラメータセットをそれぞれ参加者B、C、およびDに格納および関連付け、<パラメータを使用します.参加者Bからのみ発信されるRTPパケットで伝送されるNALユニットをデコードするためにdata＃B>を設定し、<parameter sets data＃C>を使用します

SDPを提供する：

      m =ビデオ49170RTP / AVP 98
      a = ssrc：SSRC-B cname：CNAME-B
      a = ssrc：SSRC-C cname：CNAME-C
      a = ssrc：SSRC-D cname：CNAME-D
      a = ssrc：SSRC-B fmtp：98
        sprop-parameter-sets = <パラメータセットデータ#B>
      a = ssrc：SSRC-C fmtp：98
        sprop-parameter-sets = <パラメータセットデータ#C>
      a = ssrc：SSRC-D fmtp：98
        sprop-parameter-sets = <パラメータセットデータ#D>
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1
        
SDPに答える：

      m =ビデオ49170RTP / AVP 98
      a = ssrc：SSRC-A cname：CNAME-A
      a = ssrc：SSRC-A fmtp：98
        sprop-parameter-sets = <パラメータセットデータ#A>
      a = rtpmap：98 H264 / 90000
      a = fmtp：98 profile-level-id = 42A01E; //ベースラインプロファイル、レベル3.0
        packetization-mode = 1
        
8.4.パラメータセットに関する考慮事項
H.264パラメータセットはビデオコーデックの基本的な部分であり、その動作に不可欠です（セクション1.2を参照）.それらの特性とデコードプロセスにとっての重要性のために、失われた、または誤って送信されたパラメータセットは、受信機でローカルに隠すことはほとんどできません.破損したパラメータセットへの参照は、通常、デコードプロセスに致命的な結果をもたらします.破損は、たとえば、パラメータセットNALユニットの誤った送信または損失が原因で発生する可能性がありますが、パラメータセット更新のタイムリーでない送信が原因でも発生する可能性があります.パラメータセットの更新とは、画像パラメータセットまたはシーケンスパラメータセットの識別子が変更されないままである、画像パラメータセットまたはシーケンスパラメータセット内の少なくとも1つのパラメータの変更を指します.したがって、

パラメータセットNALUは、次の3つの異なる原則を使用して転送できます.

A.実際のRTPセッションの前にセッション制御プロトコル（帯域外）を使用する.

B.進行中のRTPセッション中にセッション制御プロトコル（帯域外）を使用する.

C.進行中のRTPセッション中のペイロード（帯域内）のRTPパケットストリーム内.

セッション制御プロトコル内に原則AおよびBを実装することをお勧めします.SIPおよびSDPは、SDPオファー/アンサーモデルおよびこのメモの前のセクションで説明されているように使用できます.セクション8.2.2には、メディアタイプパラメータsprop-parameter-sets、sprop-level-parameter-sets、use-level-srcを使用したSDPオファー/アンサーでのパラメータセットの帯域内または帯域外の転送に関する詳細な説明が含まれています. -パラメータセット、および帯域内パラメータセット.このセクションには、原則AおよびBをセッション制御プロトコル内で実装する方法に関するガイドラインが含まれています.使用される特定のプロトコルとは無関係です.原則Cは、この仕様で定義されているRTPペイロード形式でサポートされています.Topo-Video-switch-MCU [29]のようなトポロジーがあり、原理Cの使用が望ましい場合があります.

パラメータセットの帯域内シグナリングを使用する場合、いずれかのタイプのパラメータセットが失われる可能性があるため、RTPの信頼できる配信方法（以下を参照）を使用して、画像およびシーケンスのパラメータセットNALUをRTPペイロードで送信する必要があります.対応するRTPパケットストリームのかなりの部分のデコードを防ぎます.

パラメータセットの帯域内信号方式が使用される場合、送信者はエラー特性を考慮に入れ、パラメータセットを正しく配信するための高い確率を提供するメカニズムを使用する必要があります.正しく受信される可能性を高めるメカニズムには、パケットの繰り返し、FEC、および再送信が含まれます.信頼性の低い帯域外制御プロトコルを使用すると、帯域内信号方式と同様の欠点があり（損失の可能性）、さらに、同期が困難になる可能性があります（以下を参照）.したがって、推奨されません.

パラメータセットは、原則BおよびCを使用して、セッションの存続期間中に追加または更新できます.パラメータセットは、それらを参照するNALユニットの前にデコーダに存在する必要があります.パラメータセットを更新または追加すると、さらに問題が発生する可能性があります.したがって、次の推奨事項を検討する必要があります.

-パラメータセットを追加または更新する場合は、使用する前にパラメータセットが確実に配信されるように注意する必要があります.新しいパラメータセットが追加されると、以前は使用されていなかったパラメータセット識別子が使用されます.帯域外シグナリングと帯域内トラフィックの間に同期が存在しないのは一般的です.帯域外シグナリングを使用する場合は、シグナリングプロトコルからの配信を確認する前に、送信者が追加または更新されたパラメータセットを必要とするNALUの送信を開始しないことをお勧めします.

-パラメータセットを更新するときは、次の同期の問題を考慮する必要があります.受信者で設定されたパラメータを上書きする場合、送信者は、ネットワークまたは受信者のバッファに存在するNALUが問題のパラメータセットを必要としないことを確認する必要があります.そうしないと、間違ったパラメータセットでデコードが発生する可能性があります.この問題を軽減するには、十分に長い間使用されていないパラメーターセットのみを上書きするか（関連するすべてのNALUが消費されていることを確認するため）、代わりに新しいパラメーターセットを追加することをお勧めします（悪影響が生じる可能性があります）.ビデオコーディングの効率のために）.

有益な注意：Topo-Video-switch-MCU [29]のような一部のトポロジでは、パラメータセットのセット全体の発信元は、一意でないパラメータセット識別子を使用する可能性のある複数のソースから取得される場合があります.この場合、帯域外チャネルでパラメータセットの一意性を有効にする他のメカニズムが存在しない場合、オファーは既存のパラメータセットを上書きする可能性があります.

-マルチパーティセッションでは、1人の参加者は、異なるソースからのパラメータセットを可能な限りソースIDに関連付ける必要があります.たとえば、帯域外で転送されるパラメータセットを伝達することにより、異なるソースは通常、独立したパラメータセット識別子値スペースを使用します.

-同じRTPセッションで原則BとCの両方を使用してパラメータセットを追加または変更すると、制御とRTPチャネル間の同期が不足するため、パラメータセットの不整合が発生する可能性があります.したがって、十分な同期が提供されない限り、原則BとCの両方を同じセッションで使用してはなりません.

一部のシナリオ（たとえば、H.241に対応するこのペイロード形式仕様のサブセットのみが使用される場合）またはトポロジでは、帯域外パラメータセット送信を使用することはできません.この場合、パラメータセットは帯域内で送信する必要があります.ここでは、ビットストリーム内の非パラメータセットデータとの同期は暗黙的ですが、損失の可能性を考慮に入れる必要があります.

上記のメカニズムを使用して、損失確率を減らす必要があります.パラメータセットの喪失が検出された場合、たとえばRTCPフィードバックFull Intra Request（FIR）[30]を使用して、デコーダリフレッシュポイント手順を使用して回復を実現できます.2つの例のデコーダリフレッシュポイント手順は、有益なセクション8.5で提供されています.

-パラメータセットが最初に原則Aを使用して提供され、その後帯域内で追加または更新される場合（原則C）、帯域外で配信されるパラメータセットの更新に関連するリスクがあります.レシーバーが一部の帯域内更新を見逃した場合（たとえば、損失やチューンインの遅延など）、それらのレシーバーは古いパラメーターを使用してビットストリームをデコードしようとします.したがって、パラメータセットIDを帯域外パラメータセットと帯域内パラメータセットの間で分割することをお勧めします.

8.5.パラメータセットのバンド内トランスポートを使用したデコーダの更新ポイント手順（参考情報）

[1]に準拠したビデオエンコーダーを備えた送信者がデコーダーリフレッシュポイントの要求を受信すると、エンコーダーはセクション8.5.1または8.5.2で指定された手順のいずれかを使用して高速更新モードに入る必要があります.セクション8.5.1の手順は、無損失伝送環境での推奨される応答です.どちらの手順も、H.264ビデオエンコーディングの高速更新モードに入る要件を満たしています.

8.5.1.デコーダーリフレッシュポイントのリクエストに応答するIDR手順

このセクションでは、デコーダーのリフレッシュポイントの要求に応答するための1つの可能な方法を示します.

エンコーダは、ここに示されている順序で、次のことを行うものとします.

1）IDR画像を送信する準備をすぐに行います.

2）送信するIDR画像で使用するシーケンスパラメータセットを送信します.エンコーダは、オプションで他のシーケンスパラメータセットを送信することもできます.

3）送信するIDR画像で使用する画像パラメータセットを送信します.エンコーダは、オプションで他の画像パラメータセットを送信することもできます.

4）IDR画像を送信します.

5）この時点から、要求を受信する前にそのようなパラメータセットが以前に送信されたかどうかに関係なく、NALユニットによる参照の前に、この手順でまだ送信されていない他のシーケンスまたは画像パラメータセットを送信します.デコーダのリフレッシュポイント用.必要に応じて、このようなパラメータセットは、バッチで、一度に1つずつ、またはこれら2つの方法の任意の組み合わせで送信できます.パラメータセットは、冗長性のためにいつでも再送信できます.上記のセクション8.4で説明したように、パラメータセットの更新が存在する場合は注意が必要です.

8.5.2.デコーダーリフレッシュポイントの要求に応答するための段階的回復手順

このセクションでは、デコーダーのリフレッシュポイントの要求に応答する別の可能な方法を示します.

エンコーダは、ここに示されている順序で、次のことを行うものとします.

1）リカバリポイントSEIメッセージを送信します（[1]のセクションD.1.7およびD.2.7を参照）.

2）NALユニットによる参照の前に、リカバリポイントSEIメッセージの前に送信されたシーケンスおよび画像パラメータセットを繰り返します.

エンコーダは、今後の送信にエラーがないと仮定して、出力順に、リカバリポイントSEIメッセージで示されるリカバリポイント以降の画像の相互予測のために、デコーダがすべての参照画像にアクセスできるようにする必要があります. .

リカバリポイントSEIメッセージのrecovery_frame_cnt構文要素の値は、高速リカバリを保証するために十分に小さくする必要があります.

必要に応じて、このようなパラメータセットは、バッチで、一度に1つずつ、またはこれら2つの方法の任意の組み合わせで再送信できます.パラメータセットは、冗長性のためにいつでも再送信できます.上記のセクション8.4で説明したように、パラメータセットの更新が存在する場合は注意が必要です.

9.セキュリティに関する考慮事項
この仕様で定義されているペイロード形式を使用するRTPパケットは、RTP仕様[5]および適切なRTPプロファイル（[16]など）で説明されているセキュリティ上の考慮事項の対象となります.これは、メディアストリームの機密性が、たとえばSRTPの適用による暗号化によって達成されることを意味します[26].このペイロード形式で使用されるデータ圧縮は

エンドツーエンドで適用される場合、暗号化は圧縮後に実行する必要があります.受信側の計算負荷が不均一な圧縮技術を使用したデータエンコーディングには、潜在的なサービス拒否の脅威が存在します.攻撃者は、デコードが複雑でレシーバーが過負荷になる病理学的データグラムをストリームに挿入できます.H.264は、将来の多くのNALユニットのデコードプロセスに影響を与えるNALユニットを含むデータグラムを生成するのが非常に簡単であるため、このような攻撃に対して特に脆弱です.したがって、少なくともRTPパケットのデータ発信元認証とデータ整合性保護の使用は、たとえばSRTP [26]で推奨されます.

RTPパケットとそのペイロードの機密性と整合性を確保するための適切なメカニズムは、アプリケーションと、使用されるトランスポートおよびシグナリングプロトコルに大きく依存することに注意してください.したがって、SRTPは上記の例として示されていますが、他の可能な選択肢が存在します.

デコーダーは、特にアクティブな要素が含まれている場合、ユーザーデータSEIメッセージの処理に関して注意を払う必要があり、適用範囲をストリームを含むプレゼンテーションに制限する必要があります.

認証、整合性、または機密性保護のいずれかを備えたエンドツーエンドのセキュリティにより、MANEは完全なパケットを破棄する以外のメディア対応操作を実行できなくなります.機密保護の場合、メディアを意識した方法でパケットを破棄することさえ防止されます.MANEがその操作を実行できるようにするには、セキュリティコンテキストの確立に含まれる信頼できるエンティティである必要があります.

10.輻輳制御
RTPの輻輳制御は、RFC 3550 [5]と、RFC 3551 [16]などの該当するRTPプロファイルに従って使用する必要があります.ベストエフォートサービスが使用されている場合、追加の要件は、このペイロード形式のユーザーがパケット損失を監視して、パケット損失率が許容可能なパラメータ内にあることを確認する必要があることです.同じネットワークパスを通過し、同じネットワーク状態を経験しているTCPフローが、RTPフローが達成している以上の、妥当なタイムスケールで測定された平均スループットを達成する場合、パケット損失は許容できると見なされます.この条件は、輻輳制御メカニズムを実装して伝送速度（または階層化マルチキャストセッションにサブスクライブされた層の数）を適応させるか、損失率が許容できないほど高い場合に受信者がセッションを離れるように調整することで満たすことができます.

輻輳制御の原則に従うために必要なビットレートの適応は、リアルタイムエンコーディングを使用すると簡単に実現できます.ただし、事前にエンコードされたコンテンツが送信されている場合、帯域幅の適応には、同じコンテンツの複数のコード化された表現が異なるビットレートで利用可能であるか、ビットストリームに非参照画像またはサブシーケンス[22]が存在する必要があります.異なる表現間の切り替えは、通常、同じRTPセッションで実行できます.たとえば、拡張プロファイルのSI / SPスライスと呼ばれる概念を採用するか、IDR画像境界でストリームを切り替えます.ダウングレードできないパラメータ（プロファイル/レベルIDのプロファイル部分など）を変更する必要がある場合にのみ、メディアストリームを終了して再起動する必要があります.

MANEは、セクション7.3で概説されている提案に従い、以前のパケット損失のためにストリームが損傷した場合に、パケットストリームから特定の使用できないパケットを削除する場合があります.これにより、特定の特殊なケースでネットワークの負荷を軽減できます.

11.IANAの考慮事項
RFC 3984で指定されているH264メディアサブタイプ名は、このメモのセクション8.1で定義されているように更新されています.

12.有益な付録：アプリケーション例
このペイロード仕様は、H.264で予想される非常に広いアプリケーションスペースをカバーするために、その使用において非常に柔軟です.ただし、この優れた柔軟性により、実装者が合理的なパケット化スキームを決定することも困難になります.この仕様を実際のシナリオに適用する方法に関するいくつかの情報は、近い将来、学術出版物、テストモデルソフトウェアおよび説明の形で表示される可能性があります.ただし、ここではいくつかの予備的な使用シナリオについても説明します.

12.1.ITU-T勧告H.241の付録Aによるビデオテレフォニー

オプションのビデオ圧縮スキームとしてH.264を使用するH.323ベースのビデオテレフォニーシステムは、パケット化スキームとしてH.241 [3]の付録Aをサポートする必要があります.この付録で定義されているパケット化メカニズムは、この仕様の小さなサブセットと技術的に同じです.

システムがH.241のAnnexAに従って動作する場合、パラメータセットのNALユニットはインバンドで送信されます.単一のNALユニットパケットのみが使用されます.このようなシステムの多くは、IDR画像を定期的に送信していませんが、

ユーザーインタラクションまたは制御プロトコル手段によって必要な場合、たとえば、マルチポイントコントロールユニットのビデオチャネルを切り替えるとき、またはフィードバックによって要求されたエラー回復のため.

12.2.ビデオテレフォニー、スライスデータパーティショニングなし、NALユニット集約なし

このスキームのRTP部分は実装され、テストされています（ただし、制御プロトコル部分ではありません.以下を参照してください）.

ほとんどの実際のビデオテレフォニーアプリケーションでは、画像サイズやオプションモードなどの画像パラメータは、接続の存続期間中に変更されることはありません.したがって、必要なすべてのパラメータセット（通常は1つのみ）は、機能交換/アナウンスプロセスの副作用として送信されます.たとえば、このドキュメントのセクション8.2で指定されているSDP構文に従います.RTPセッションが開始する前に、必要なすべてのパラメータセット情報が確立されるため、パラメータセットのNALユニットを送信する必要はありません.スライスデータのパーティショニングも使用されません.したがって、RTPパケットストリームは基本的に、単一のコード化されたスライスを伝送するNALユニットで構成されます.

エンコーダーは、最高のパフォーマンスを提供するように、コード化されたスライスNALユニットのサイズを選択します.多くの場合、これは、コード化されたスライスサイズをIPネットワークのMTUサイズに適合させることによって行われます.画像サイズが小さい場合、これは1パケットあたり1画像の戦略になる可能性があります.イントラリフレッシュアルゴリズムは、パケットの損失とその結果生じるドリフト関連のアーティファクトをクリーンアップします.

12.3.ビデオテレフォニー、NALユニットアグリゲーションを使用したインターリーブパケット化

このスキームは、より優れたエラー隠蔽を可能にし、RFC4629パケット化を使用するH.263ベースの設計で使用されます[11].これは実装されており、良好な結果が報告されています[13].

VCLエンコーダーは、1 MB行のすべてのマクロブロック（MB）が1つのスライスに割り当てられるように、ソース画像をコーディングします.偶数のMB行アドレスを持つすべてのスライスが1つのSTAPに結合され、奇数のMB行アドレスを持つすべてのスライスが別のSTAPに結合されます.これらのSTAPはRTPパケットとして送信されます.パラメータセットの確立は、上記のように実行されます.

個々のスライスの数が多いと（Common Intermediate Format（CIF）画像の場合は18）、IP / UDP / RTPヘッダーのオーバーヘッドが許容できないほど高くなるため（ソースコーディングツールFMOを使用しない限り）、ここではSTAPの使用が不可欠であることに注意してください. 、このシナリオでは想定されていません）.さらに、いくつかのワイヤレスビデオ伝送システム、

H.324Mや3GPPで指定されているIPベースのビデオテレフォニーなどは、比較的小さなトランスポートパケットサイズを使用する可能性があります.たとえば、H.223 AL3SDUの一般的なMTUサイズは約100バイトです[17].このパケット化スキームに従って個々のスライスをコーディングすると、個々のスライスがワイヤレスシステムの推奨される最大パケットサイズよりも小さくなる可能性が高いため、有線ネットワークとワイヤレスネットワーク間の通信にさらに利点があります.その結果、ゲートウェイは、有線ネットワークで使用されるSTAPを1つのNALユニットのみで複数のRTPパケットに変換できます.これは、無線ネットワークで優先され、その逆も同様です.

12.4.データ分割を使用したビデオテレフォニー
このスキームは実装されており、特に高いパケット損失率で優れたパフォーマンスを提供することが示されています[13].

データ分割は、何らかの形の不均等なエラー保護が利用可能な場合にのみ役立つことが知られています.通常、シングルセッションRTP環境では、エラー特性も想定されます.つまり、セッションのすべてのパケットのパケット損失確率は統計的に同じです.ただし、RTPセッションでの個々のパケットのパケット損失の可能性を減らす手段があります.たとえば、RFC 5109 [18]に準拠したFECパケットは、FECパケットに関連付けられているメディアパケットを指定します.

すべての場合において、発生するオーバーヘッドはかなりのものですが、それ以外の場合はイントラ情報に費やされたビット数と同じオーダーです.ただし、このメカニズムによってシステムに遅延が追加されることはありません.

この場合も、完全なパラメータセットの確立は、制御プロトコル手段を介して実行されます.

12.5.FUと前方誤り訂正を使用したビデオテレフォニーまたはストリーミング

このスキームは実装されており、特に高いパケット損失率で優れたパフォーマンスを提供することが示されています[19].

再送信が適用できないシナリオでパケット損失に対抗するための最も効率的な手段は、前方誤り訂正（FEC）です.アプリケーション層ではありますが、FECのエンドツーエンドの使用は、個々のリンクのFECベースの保護よりも効率が悪いことがよくあります（特に、異なる特性のリンクが伝送パスにある場合）、アプリケーション層、エンドツーエンドのFECは避けられませんいくつかのシナリオでは.RFC 5109 [18]は、パケット損失環境で汎用のアプリケーション層のエンドツーエンドFECを使用する手段を提供します.バイナリフォワードエラー訂正コードは、XOR演算をに適用することによって生成されます.

異なるパケットの同じビット位置にあるビット.バイナリコードは、パラメータ（n、k）で指定できます.ここで、kは接続で使用される情報パケットの数であり、nはk個の情報パケットに対して生成されるパケットの総数です.つまり、k個の情報パケットに対してnk個のパリティパケットが生成されます.

RFC 5109フレームワーク内でパラメーター（n、k）を使用してコードを使用する場合、次のプロパティがよく知られています.

a）1つのRTPパケットに適用される場合、RFC5109はパケットの繰り返しのみを提供します.

b）RFC 5109は、XOR接続されたパケットの長さが等しい場合に最もビットレート効率が高くなります.

c）同じパケット損失確率pで、固定kの場合、nの値が大きいほど、残留エラー確率は小さくなります.たとえば、パケット損失確率が10％、k = 1、およびn = 2の場合、残留エラー確率は約1％ですが、n = 3の場合、残留エラー確率は約0.1％です.

d）同じパケット損失確率pで、固定コードレートk / nの場合、nの値が大きいほど、残留エラー確率は小さくなります.たとえば、パケット損失確率がp = 10％、k = 1、およびn = 2の場合、残存エラー率は約1％ですが、k = 12およびn = 24の拡張ゴレイコードの場合、残存エラー率は率は約0.01％です.

FUを使用せずにRFC5109をH.264ベースラインコード化ビデオと組み合わせて適用するには、いくつかのオプションを検討できます.

1）ビデオエンコーダは、各ビデオフレームが単一のスライスにコード化されているNALユニットを生成します.FECを適用すると、（n = 2、k = 1）などの単純なコードを使用できます.つまり、各NALユニットは基本的に繰り返されるだけです.欠点は明らかに、上記のd）によるコードのパフォーマンスが悪いことと、（n、k = 1）コードしか使用できないため、柔軟性が低いことです.

2）ビデオエンコーダは、各ビデオフレームが1つ以上の連続したスライスにエンコードされているNALユニットを生成します.FECを適用すると、一連のNALユニットに対して、より適切なコード（n = 24、k = 12など）を使用できます.フレームあたりのRTPパケットの数によっては、損失によって大幅な遅延が発生する可能性があります.これは、フレームあたりのRTPパケットの使用量が増えると減少します.完全に異なる長さのパケットも接続される可能性があり、ビットレートが低下します

上記のb）による効率.ただし、注意を払い、1 kb以上のスライスの場合、同様の長さ（100〜200バイトの差）が生成される可能性があります.これにより、ビット効率が壊滅的に低下することはありません.

3）ビデオエンコーダーはNALユニットを生成します.このユニットの特定のフレームには、ほぼ同じ長さのk個のスライスが含まれています.次に、FECを適用すると、各フレームのNALユニットのシーケンスに対して、より適切なコード（n = 24、k = 12）を使用できます.上記の2）と比較して遅延は減少する可能性がありますが、いくつかの欠点が明らかです.まず、スライス構造化コーディングによりフレーム内予測が減少し、追加のスライスオーバーヘッドが必要になるため、エンコードされたビデオのコーディング効率が大幅に低下します.第2に、事前にエンコードされたコンテンツ、またはゲートウェイを介して動作する場合、ビデオは通常、FECを適用できるようにkスライスで適切にコーディングされていません.最後に、同じ長さのkスライスを生成するビデオのエンコードは簡単ではなく、複数のエンコードパスが必要になる場合があります.

上記の欠点の多くは、FECと組み合わせてFUを適用することで回避できます.各NALユニットは、基本的に同じ長さのFUに分割できます.したがって、エンコーダが同じ長さのスライスを生成する努力をしなかった場合でも、妥当なkとnのFECを適用できます.たとえば、フレーム全体を含むコード化されたスライスNALユニットをk FUに分割し、パリティチェックコード（n = k + 1、k）を適用できます.ただし、これには、作成されたすべてのフラグメントを回復できない限り、スライス全体が失われるという欠点があります.したがって、フレームが複数のスライスに分割された場合よりも大きなセクションが失われます.

提示された技術は、追加のソースコーディング層の冗長性（周期的なイントラフレームなど）が存在しない場合でも、良好な伝送エラー耐性を達成することを可能にします.その結果、同じコード化されたビデオシーケンスを使用して、エラーのない伝送で最大の圧縮効率と品質を実現し、エラーが発生しやすいネットワークでの伝送を実現できます.さらに、この手法により、遅延を追加することなく、事前にエンコードされたシーケンスにFECを適用できます.この場合、エラーが発生しやすいネットワーク用にエンコードされていない事前にエンコードされたシーケンスは、大幅な遅延を追加することなく、ほぼ確実に送信できます.さらに、同じ長さのFUは、RFC5109のビットレート効率の高い使用をもたらします.

エラー確率が送信されたパケットの長さに依存する場合（たとえば、モバイル送信の場合[15]）、FECでFUを適用することの利点はさらに明白です.基本的に、FUのサイズの柔軟性により、各NALユニットに適切なFECを適用し、NALユニットの不均等なエラー保護を行うことができます.

FUとFECを使用すると、発生するオーバーヘッドはかなり大きくなりますが、FECが適用されていない場合に、コード化されたマクロブロックに費やす必要のあるビット数と同じオーダーになります.[19]では、FECベースのアプローチの全体的なパフォーマンスが、オーバーヘッドを含め、同じエラーレートと同じ全体的なビットレートを使用した場合に品質を向上させることが示されました.

12.6.低ビットレートストリーミング
このスキームは、H.263および非標準のRTPパケット化で実装されており、良好な結果が得られています[20].H.264で同様に良好な結果が得られなかった技術的な理由はありません.

今日のインターネットストリーミングでは、ダイヤルアップモデムを備えた端末がコンテンツにアクセスできるようにするために、提供されるビットレートの一部が比較的低くなっています.有線IPネットワークでは、ネットワークの輻輳を減らすために、比較的大きなパケット、たとえば500〜1500バイトが、小さくて頻繁に発生するパケットよりも優先されます.さらに、大きなパケットを使用すると、RTP / UDP / IPヘッダーのオーバーヘッドの量が減少します.低ビットレートのビデオの場合、大きなパケットを使用すると、1つのパケットに最大数枚の画像をカプセル化する必要がある場合があります.

ただし、多くのコード化された画像を含むパケットの損失は、前の画像を繰り返す以外に画像全体の損失を隠す方法が事実上ないため、視覚的品質に劇的な結果をもたらします.比較的大きなパケットを作成し、損失の隠蔽を成功させる可能性を維持する1つの方法は、複数の画像からインターリーブされたスライスを含むMTAPを作成することです.MTAPには、同じ画像の空間的に隣接するスライスや、任意の画像の空間的に重複するスライスを含めることはできません.パケットが失われた場合、失われたスライスは、同じ画像の空間的に隣接するスライスと、時間的に前後の画像の空間的に対応するスライスに囲まれている可能性があります.その結果、失われたスライスの隠蔽は比較的成功する可能性があります.

12.7.ビデオストリーミングにおけるロバストなパケットスケジューリング
堅牢なパケットスケジューリングはMPEG-4Part 2で実装され、ワイヤレスストリーミング環境でシミュレートされています[21].H.264で同様またはより良い結果が得られなかった技術的な理由はありません.

ストリーミングクライアントには通常、比較的大量のデータを保存できるレシーバーバッファがあります.最初に、ストリーミングセッションが確立されたとき、クライアントはストリームの再生をすぐには開始しません.むしろ、通常、受信データを数秒間バッファリングします.このバッファリングは、継続性を維持するのに役立ちます

時折送信遅延が増加したり、ネットワークスループットが低下した場合に、クライアントはバッファリングされたデータをデコードして再生できるため、再生.それ以外の場合、初期バッファリングなしで、クライアントは表示をフリーズし、デコードを停止し、着信データを待つ必要があります.バッファリングは、任意のプロトコルレベルでの自動または選択的な再送信にも必要です.画像の一部が失われた場合、再送信メカニズムを使用して、失われたデータを再送信できます.再送信されたデータがスケジュールされたデコードまたは再生時間の前に受信された場合、損失は完全に回復されます.コード化された画像は、デコードされたシーケンスの主観的な品質における重要性に従ってランク付けできます.たとえば、従来のB画像などの非参照画像は、他の画像のデコードに影響を与えないため、主観的に最も重要ではありません.非参照画像に加えて、ITU-T H.264 | ISO / IEC 14496-10規格には、サブシーケンスと呼ばれる時間スケーラビリティ方式が含まれています[22].主観的なランク付けは、コード化されたスライスデータパーティションまたはスライスグループベースで行うこともできます.主観的に最も重要なコード化スライスおよびコード化スライスデータパーティションは、デコード順序が示すよりも早く送信できますが、主観的に最も重要でないコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信できます.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.264 | ISO / IEC 14496-10規格には、サブシーケンスと呼ばれる時間スケーラビリティ方式が含まれています[22].主観的なランク付けは、コード化されたスライスデータパーティションまたはスライスグループベースで行うこともできます.主観的に最も重要なコード化スライスおよびコード化スライスデータパーティションは、デコード順序が示すよりも早く送信できますが、主観的に最も重要でないコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信できます.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.264 | ISO / IEC 14496-10規格には、サブシーケンスと呼ばれる時間スケーラビリティ方式が含まれています[22].主観的なランク付けは、コード化されたスライスデータパーティションまたはスライスグループベースで行うこともできます.主観的に最も重要なコード化スライスおよびコード化スライスデータパーティションは、デコード順序が示すよりも早く送信できますが、主観的に最も重要でないコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信できます.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.主観的なランク付けは、コード化されたスライスデータパーティションまたはスライスグループベースで行うこともできます.主観的に最も重要なコード化スライスおよびコード化スライスデータパーティションは、デコード順序が示すよりも早く送信できますが、主観的に最も重要でないコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信できます.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.主観的なランク付けは、コード化されたスライスデータパーティションまたはスライスグループベースで行うこともできます.主観的に最も重要なコード化スライスおよびコード化スライスデータパーティションは、デコード順序が示すよりも早く送信できますが、主観的に最も重要でないコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信できます.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.一方、主観的に最も重要性が低いコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信される可能性があります.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.一方、主観的に最も重要性が低いコード化スライスおよびコード化スライスデータパーティションは、自然なコーディング順序が示すよりも遅く送信される可能性があります.その結果、最も重要なスライスおよびコード化されたスライスデータパーティションの再送信された部分は、最も重要でないスライスおよびスライスデータパーティションと比較して、スケジュールされたデコードまたは再生時間の前に受信される可能性が高くなります.

13.有益な付録：注文番号をデコードする理由
13.1.前書き
デコード順序番号（DON）の概念は、主に効率的なマルチピクチャスライスインターリーブ（セクション12.6を参照）と堅牢なパケットスケジューリング（セクション12.7を参照）を可能にするために導入されました.これらのアプリケーションの両方で、NALユニットはデコード順序から外れて送信されます.DONは、NALユニットのデコード順序を示し、デコード順序を回復するためにレシーバーで使用する必要があります.効率的なマルチピクチャスライスインターリーブと堅牢なパケットスケジューリングの使用例は、それぞれセクション13.2と13.3に記載されています.セクション13.4では、冗長なコード化された画像によって達成されるエラー回復力におけるDONの概念の利点について説明します.セクション13.5は、DONの検討された代替案を要約し、このRTPペイロード仕様にDONが選択された理由を正当化します.

13.2.マルチピクチャースライスインターリーブの例
マルチピクチャスライスインターリーブの例を次に示します.コード化されたビデオシーケンスのサブセットを、出力順に以下に示します.Rは参照画像、Nは非参照画像、数字は相対出力時間を示します.

... R1 N2 R3 N4 R5...

これらの画像の左から右へのデコード順序は次のとおりです.

... R1 R3 N2 R5 N4...

画像R1、R3、N2、R5、およびN4のNALユニットには、それぞれ1、2、3、4、および5に等しいDONが付けられています.

各参照画像は、次のように分散された3つのスライスグループで構成されています（番号は、Quarter Common Intermediate Format（QCIF）フレーム内の各マクロブロックのスライスグループ番号を示します）.

0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2 0 1 2

簡単にするために、スライスグループのすべてのマクロブロックが1つのスライスに含まれていると仮定します.3つのMTAPは、3つの連続する参照画像から構築されるため、各MTAPには3つの集約ユニットが含まれ、各ユニットには1つのスライスグループのすべてのマクロブロックが含まれます.最初のMTAPには、画像R1のスライスグループ0、画像R3のスライスグループ1、および画像R5のスライスグループ2が含まれています.2番目のMTAPには、画像R1のスライスグループ1、画像R3のスライスグループ2、および画像R5のスライスグループ0が含まれています.3番目のMTAPには、画像R1のスライスグループ2、画像R3のスライスグループ0、および画像R5のスライスグループ1が含まれています.各非参照画像はSTAP-Bにカプセル化されます.

したがって、NALユニットの送信順序は次のとおりです.

      R1、スライスグループ0、DON 1、MTAPで伝送、RTP SN：N
      R3、スライスグループ1、DON 2、MTAPで伝送、RTP SN：N
      R5、スライスグループ2、DON 4、MTAPで伝送、RTP SN：N
      R1、スライスグループ1、DON 1、MTAP、RTP SNで伝送：N + 1
      R3、スライスグループ2、DON 2、MTAP、RTP SNで伝送：N + 1
      R5、スライスグループ0、DON 4、MTAP、RTP SNで伝送：N + 1
      R1、スライスグループ2、DON 1、MTAP、RTP SNで伝送：N + 2
      R3、スライスグループ1、DON 2、MTAP、RTP SNで伝送：N + 2
      R5、スライスグループ0、DON 4、MTAP、RTP SNで伝送：N + 2
      N2、DON 3、STAP-B、RTP SNで搭載：N + 3
      N4、DON 5、STAP-B、RTP SNで搭載：N + 4
        
受信者は、各NALユニットに関連付けられたDONの値に基づいて、デコード順にNALユニットを編成できます.

MTAPの1つが失われた場合、空間的に隣接し、時間的に同じ場所に配置されたマクロブロックが受信され、損失を効率的に隠すために使用できます.STAPの1つが失われた場合、損失の影響は一時的に伝播しません.

13.3.ロバストなパケットスケジューリングの例
堅牢なパケットスケジューリングの例を次に示します.この例で使用されている通信システムは、ビデオがソースからシンクに処理される順序で、次のコンポーネントで構成されています.

oカメラとキャプチャoプリエンコードバッファoエンコーダoエンコードされた画像バッファo送信機o送信チャネルo受信機o受信機バッファoデコーダーoデコードされた画像バッファoディスプレイ

この例で使用されているビデオ通信システムは、次のように動作します.ビデオストリームの処理は、システムのすべてのコンポーネントで徐々に同時に行われることに注意してください.ソースビデオシーケンスが撮影され、プリエンコーディングバッファにキャプチャされます.プリエンコードバッファは、たとえば、サンプリング順序からエンコード順序に画像を並べ替えたり、ビットレート制御の目的で複数の非圧縮フレームを分析したりするために使用できます.場合によっては、プリエンコーディングバッファが存在しない可能性があります.代わりに、サンプリングされた写真は

すぐにエンコードされます.エンコーダは、プリエンコーディングバッファからの画像をエンコードし、出力（つまり、コード化された画像）をエンコードされた画像バッファに格納します.送信機は、コード化された画像をエンコードされた画像バッファから送信パケットにカプセル化し、送信チャネルを介して受信機に送信します.受信者は、受信したパケットを受信者バッファに保存します.受信機のバッファリングプロセスには、通常、伝送遅延ジッタのバッファリングが含まれます.レシーバーバッファは、コード化されたデータの正しいデコード順序を回復するためにも使用できます.デコーダは、受信バッファからコード化されたデータを読み取り、デコードされた画像をデコードされた画像バッファへの出力として生成します.デコードされた画像バッファは、画像の出力（または表示）順序を回復するために使用されます.最後に、画像が表示されます.

次の図の例では、IはIDR画像を示し、Rは参照画像を示し、Nは非参照画像を示し、I、R、またはNの後の数字は、デコード順で前のIDR画像と比較したサンプリング時間を示します.写真のシーケンスの下の値は、スケーリングされたシステムクロックのタイムスタンプを示します.この例では、システムクロックは任意に初期化され、時間は左から右に実行されます.I、R、およびNの各画像は、エンコード、送信、およびデコードに時間がかからないと仮定して、前の処理ステップ（存在する場合）と比較して同じタイムラインにマップされます.したがって、同時に発生するイベントは、すべての例の図全体で同じ列に配置されます.

コード化された一連の画像のサブセットを、サンプリング順に以下に示します.

       ... N58 N59 I00 N01 N02 R03 N04 N05 R06 ... N58 N59 I00 N01...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- | -...- | --- |- -| --- |-...
       ... 58 59 60 61 62 63 64 65 66 ... 128129130131...
        
図16.サンプリング順の画像のシーケンス

サンプリングされた画像は、エンコード順に並べるために、プリエンコードバッファにバッファリングされます.この例では、IDR画像の直前の非参照画像を除いて、出力順に前の参照画像と次の参照画像の両方から非参照画像が予測されると仮定します.出力順序.したがって、プリエンコーディングバッファには少なくとも2つの画像が含まれている必要があり、バッファリングによって2つの画像間隔の遅延が発生します.事前エンコードバッファリングプロセスの出力と画像のエンコード（およびデコード）順序は次のとおりです.

       ... N58 N59 I00 R03 N01 N02 R06 N04 N05...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- |-...
       ... 60 61 62 63 64 65 66 67 68...
        
図17.プリエンコーディングバッファ内の並べ替えられた画像

エンコーダーまたはトランスミッターは、各画像のDONの値を、デコード順に1を加えた順序で前の画像のDONの値に設定できます.

簡単にするために、次のように仮定します.

oシーケンスのフレームレートは一定です.o各画像は1つのスライスのみで構成されます.o各スライスは単一のNALユニットパケットにカプセル化されます.o送信遅延はありません.o画像は一定の間隔で送信されます（つまり、 1 /（フレームレート））.

画像がデコード順に送信される場合、次のように受信されます.

       ... N58 N59 I00 R03 N01 N02 R06 N04 N05...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- |-...
       ... 60 61 62 63 64 65 66 67 68...
        
図18.デコード順に受信した画像

OPTIONAL sprop-interleaving-depthメディアタイプパラメータは0に設定されます.これは、送信（または受信）の順序がデコードの順序と同じであるためです.

最初に、デコーダーは、以下に示すように、デコードされた画像バッファーに1つの画像間隔をバッファリングして、画像をデコード順序から出力順序に編成する必要があります.

       ... N58 N59 I00 N01 N02 R03 N04 N05 R06...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- |-...
       ... 61 62 63 64 65 66 67 68 69...
        
図19.出力順序

デコードされた画像バッファに必要な初期バッファリングの量は、バッファリング期間のSEIメッセージで、またはH.264ビデオユーザビリティ情報のnum_reorder_frames構文要素を使用して通知できます.num_reorder_framesは、フレーム、相補フィールドペア、またはフレーム、相補フィールドペア、または非ペアフィールドの前にある非ペアフィールドの最大数を示します.

デコード順のシーケンスとそれに続く出力順のシーケンス.簡単にするために、デコードされた画像バッファの初期バッファを示すためにnum_reorder_framesが使用されていると仮定します.この例では、num_reorder_framesは1です.

送信中にIDR画像I00が失われ、システムクロックの値が62のときに再送信要求が発行された場合、再送信を受信するために1つの画像間隔（システムクロックがタイムスタンプ63に達するまで）があることがわかります. IDR画像I00.

次に、IDR画像がデコード位置より2フレーム間隔早く送信されると仮定します.つまり、画像は次のように送信されます.

       ... I00 N58 N59 R03 N01 N02 R06 N04 N05...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- |-...
       ... 62 63 64 65 66 67 68 69 70...
        
図20.インターリーブ：送信順の初期IDR画像

OPTIONAL sprop-interleaving-depthメディアタイプパラメータは、その定義に従って1に設定されます.（この例のsprop-interleaving-depthの値は、次のように導き出すことができます.画像I00は、送信順序で画像N58またはN59の前にあり、デコード順序でそれに続く唯一の画像です.画像I00、N58、およびN59を除いて、送信順序は画像のデコード順序と同じです.コード化された画像は正確に1つのNALユニットにカプセル化されるため、sprop-interleaving-depthの値は、送信順序で画像の前後にある画像の最大数に等しくなります.デコード順）.

受信機のバッファリングプロセスには、sprop-interleaving-depthパラメータの値に従って一度に2つの画像が含まれ、各画像に関連付けられたDONの値に基づいて、受信順序から正しいデコード順序に画像を並べ替えます.レシーバーバッファリングプロセスの出力は次のとおりです.

       ... N58 N59 I00 R03 N01 N02 R06 N04 N05...
       ...- | --- | --- | --- | --- | --- | --- | --- | --- |-...
       ... 63 64 65 66 67 68 69 70 71...
        
図21.インターリーブ：レシーバーバッファー

この場合も、以下に示すように、画像をデコード順から出力順に編成するには、1つの画像間隔の初期バッファリング遅延が必要です.

        ... N58 N59 I00 N01 N02 R03 N04 N05...
        ...- | --- | --- | --- | --- | --- | --- | --- |-...
        ... 64 65 66 67 68 69 70 71...
        
図22.インターリーブ：並べ替え後のレシーバーバッファー

可能なアプリケーション、トランスポート、またはリンク層の再送信を含め、IDR画像が送信中に受ける可能性のある最大遅延は、3つの画像間隔に等しいことに注意してください.したがって、IDR画像の損失回復力は、画像がデコード順に送信される場合と比較して、再送信をサポートするシステムで改善されます.

13.4.冗長なコード化されたスライスのロバストな伝送スケジューリング
冗長コード化画像は、対応するプライマリコード化画像が正しくデコードされた場合にデコードプロセスで使用されない画像または画像の一部のコード化表現です.デコードされたプライマリ画像の領域と、同じアクセスユニット内の冗長画像にH.264デコードプロセスを適用した結果として生じる対応する領域との間に目立った違いがあってはなりません.冗長コード化スライスは、冗長コード化画像の一部であるコード化スライスです.

冗長なコード化された画像を使用して、エラーが発生しやすいビデオ伝送で不均等なエラー保護を提供できます.画像の主要なコード化された表現が正しくデコードされない場合、対応する冗長なコード化された画像をデコードすることができます.冗長コーデック画像機能を使用するアプリケーションおよびコーディング技術の例には、ビデオ冗長コーディング[23]およびマルチキャストストリーミングにおける「キー画像」の保護[24]が含まれます.

多くのエラーが発生しやすいビデオ通信システムの1つの特性は、伝送エラーがバースト性であることが多いことです.したがって、送信順序で複数の連続する送信パケットに影響を与える可能性があります.低ビットレートのビデオ通信では、コード化された画像全体が1つの送信パケットにカプセル化されるのが比較的一般的です.その結果、一次符号化画像および対応する冗長符号化画像は、送信順序で連続したパケットで送信され得る.伝送方式をバースト性のある伝送エラーに対してより耐性のあるものにするために、複数のパケットによって分離された一次符号化画像および冗長符号化画像を送信することが有益である.DONの概念はこれを可能にします.

13.5.その他の設計の可能性についての注意
H.264コーディング標準のスライスヘッダー構文構造には、コーディングされたフレームのデコード順序を示すことができるframe_num構文要素が含まれています.ただし、次の理由により、frame_num構文要素の使用は、デコード順序を回復するために実行可能または望ましくありません.

oレシーバーは、コード化された画像ごとに少なくとも1つのスライスヘッダーを解析する必要があります（コード化されたデータをデコーダーに渡す前に）.

oフレーム番号構文要素が各IDR画像で0にリセットされるため、複数のコード化されたビデオシーケンスからのコード化されたスライスをインターリーブすることはできません.

o相補的なフィールドペアのコード化されたフィールドは、frame_num構文要素の同じ値を共有します.したがって、相補フィールドペアのコード化フィールドのデコード順序は、frame_num構文要素またはH.264コーディング構文の他の構文要素に基づいて復元することはできません.

MPEG-4エレメンタリストリームを転送するためのRTPペイロード形式[25]により、アクセスユニットのインターリーブと同じRTPパケット内の複数のアクセスユニットの送信が可能になります.アクセスユニットは、[1]の7.4.1.2節に従って、プライマリコード化された画像に関連付けられたすべてのNALユニットを含むようにH.264コーディング標準で指定されています.したがって、異なる画像のスライスをインターリーブすることはできず、エラー回復力を向上させるためのマルチ画像スライスインターリーブ技術（セクション12.6を参照）は使用できません.

14. RFC3984からの変更
以下は、RFC 3984からの技術的変更（バグ修正を含む）のリストです.この技術的変更のリストに加えて、多数の編集上の変更が行われていますが、このセクションには記載されていません.セクション8.2.2は、このメモの重要な変更の多くが発生する場所であり、特に注意を払う必要があることに注意してください.

1）セクション5.4、5.5、6.2、6.3、および6.4で、使用中のパケット化モードが外部手段によって通知される可能性があることを削除しました.

2）セクション7.2.2で、文を変更しました

デインターリーブバッファにはN個のVCNLALユニットがあります.

に

デインターリーブバッファには、N個以上のVCLNALユニットがあります.

3）セクション8.1で、sprop-init-buf-time（段落2）のセマンティクスが文を変更しました

パラメータは、（NALユニットの送信時間-NALユニットのデコード時間）の最大値であり、信頼性が高く瞬時の送信、送信とデコードの同じタイムライン、および最初のパケットが到着したときにデコードが開始されることを前提としています.

に

パラメータは、（NALユニットのデコード時間-NALユニットの送信時間）の最大値であり、信頼性が高く瞬時の送信、送信とデコードの同じタイムライン、および最初のパケットが到着したときにデコードが開始されることを前提としています.

4）メディアタイプパラメータmax-smbps、sprop-level-parameter-sets、use-level-src-parameter-sets、in-band-parameter-sets、sar-understand、およびsar-supportedを追加しました.

5）セクション8.1で、parameter-addの指定を削除しました.パラメータ追加の他の説明（セクション8.2および8.4）も削除されました.

6）セクション8.1で、sprop-parameter-setsに制約を追加し、profile-level-idで示されるのと同じプロファイルとレベルのパラメーターセットのみを含めることができるようにしました.

7）セクション8.2.1で、sprop-parameter-setsおよびsprop-level-parameter-setsをSDPの「a = fmtp」行に含めるか、セクションで指定されている「fmtp」ソース属性を使用して伝達できることを追加しました. [9]の6.3.

8）セクション8.2.2で、SDPオファー/アンサーモデルで使用するメディアフォーマット構成の一部からsprop-deint-buf-reqを削除しました.

9）セクション8.2.2で、SDPオファー/アンサーモデルでレベルがダウングレード可能であることを明確にしました.つまり、profile-level-idのレベル部分の使用は対称である必要はありません（回答に含まれるレベル）.オファーに含まれるレベル以下にすることができます）.

10）セクション8.2.2で、機能パラメーターを使用してエンコード機能を宣言できることを削除しました.

11）セクション8.2.2で、レベルのダウングレードの有無にかかわらず、パラメータセットの帯域外転送にsprop-parameter-setsおよびsprop-level-parameter-setsを使用する方法に関するルールを追加しました.

12）セクション8.2.2で、マルチキャストのSDPオファー/アンサーでメディアタイプパラメーターを使用するルールを明確にしました.

13）セクション8.2.2で、オファーまたは回答と方向属性のさまざまな組み合わせでさまざまなメディアタイプパラメータがどのように解釈されるかについてのリストを完成させ、修正しました.

14）セクション8.4で、パラメータセットの帯域外転送と帯域内転送の両方が許可され、どちらも推奨も必須もされないようにテキストを変更しました.

15）パラメーターセットの損失を処理するためのデコーダーリフレッシュのサンプルメソッドを提供するセクション8.5（参考）を追加しました.

16）メディアタイプパラメータmax-recv-levelおよびlevel-asymmetry-許可および調整された関連テキストとレベルのアップグレードおよび非対称性の例を追加しました.

15. RFC3984との下位互換性
現在のドキュメントはRFC3984の改訂版であり、廃止されています.RFC 3984に関連する技術的な変更は、セクション14にリストされています.このセクションでは、下位互換性の問題に対処します.

ほとんどの場合、RFC 3984に基づくレガシー実装と、このドキュメントに基づく新しい実装の相互作用に関する互換性の問題はないことに注意してください.互換性の問題は、次の条件の両方が当てはまる場合にのみ発生する可能性があります.1）レガシー実装と新しい実装が相互作用している.2）パラメータセットが帯域外に転送されている.このような互換性の問題が発生した場合、次の分析を使用して、デバッグして非互換性の理由を簡単に見つけることができます.

項目1、2、3、7、9、10、12、および13はバグ修正タイプの変更であり、下位互換性の問題は発生しません.

項目4（6つの新しいメディアタイプパラメーターの追加）では、レガシーRFC 3984レシーバーがこれらのパラメーターを無視するため、SDPオファー/アンサーベースのアプリケーションの下位互換性の問題は発生しません.レガシーRFC3984送信者がこれらのパラメーターを使用しないことは問題ありません.それらはオプションであるため.ただし、宣言型使用ベースのアプリケーションには下位互換性の問題があります（他の5つのパラメーターsprop-level-parameter-setsのみ）

パラメータは宣言型の使用法では使用できません）.たとえば、RTSPとSAPを使用する宣言型使用ベースのアプリケーションには、RFC 3984に準拠したSDPレシーバーが、SDPに認識されないパラメーターが含まれるセッションを受け入れることができないため、下位互換性の問題があります.したがって、このメモによると、RTSPまたはSAPサーバーは2セットのストリームを準備する必要がある場合があります.1つはレガシーRFC 3984レシーバー用で、もう1つはレシーバー用です.

項目5、6、および11は、パラメータセットの帯域外転送に関連しています.次の下位互換性の問題があります.

1）RFC 3984に基づくレガシー送信側に、profile-level-idからsprop-parameter-setsで示されるデフォルトレベルとは異なるレベルのパラメータセットが含まれている場合、sprop-parameter-setsのパラメータ値は受信者に対して無効です.メモ; したがって、セッションが拒否される場合があります.

2）RFC 3984に基づくレガシーオファー提供者とこのメモに基づく回答者の間のSDPオファー/アンサーで、回答者がオファーに含まれるパラメーターセットのスーパーセットではないパラメーターセットを回答に含む場合、sprop-のパラメーター値パラメータセットは提供者にとって無効であり、セッションが適切に開始されない可能性があります（変更項目11に関連）.

3）このメモの一方のエンドポイントAに1に等しい帯域内パラメータセットが含まれている場合、RFC 3984のもう一方の側Bは、パラメータセットを帯域内で送信する必要があることを理解せず、Bは引き続きパラメータセットを除外できます.送信しているインバンドストリーム.その結果、エンドポイントAは受信したストリームをデコードできません.

項目7（[9]のセクション6.3で指定されている「fmtp」ソース属性を使用したsprop-parameter-setsおよびsprop-level-parameter-setsの伝達の許可）は項目4と同様です.下位互換性の問題は発生しません. SDPオファー/アンサーベースのアプリケーションの場合、レガシーRFC 3984受信者は「fmtp」ソース属性を無視するため、レガシーRFC3984送信者はオプションであるため「fmtp」ソース属性を使用しないで問題ありません.ただし、RFC 3984に準拠したSDPレシーバーは、SDPに認識されないパラメーター（つまり、「fmtp」が含まれるセッションを受け入れることができないため、RTSPやSAPを使用するアプリケーションなどのSDP宣言型使用ベースのアプリケーションには下位互換性の問題があります. "ソース属性）.したがって、RTSPまたはSAPサーバーは2セットのストリームを準備する必要がある場合があります.

項目14では、パラメーターセットの帯域外転送が引き続き許可されているため、下位互換性の問題は発生しません.

追加されたセクション8.5は有益であるため、項目15には下位互換性の問題は発生しません.

項目16は、どちらかの端がRFC 3984に準拠している場合、デフォルトレベルの処理が同じであるため、下位互換性の問題を引き起こしません.さらに、RFC-3984に準拠している端は、新しいメディアタイプパラメータが存在する場合、それを単に無視します.

16.謝辞
RFC 3984の作成者として、Stephan Wenger、Miska Hannuksela、Thomas Stockhammer、Magnus Westerlund、David Singerに感謝します.DaveLindbergh、Philippe Gentric、Gonzalo Camarillo、Gary Sullivan、Joerg Ott、ColinPerkinsは開発中の慎重なレビューに感謝します. Stephen Botzko、Magnus Westerlund、Alex Eleftheriadis、Thomas Schierl、Tom Taylor、Ali Begen、Aaron Wells、Stuart Taylor、Robert Sparks、Dan Romascanu、およびNiclas Comstedtは、この開発中の貴重なコメントと入力に感謝します.メモ.

17.参考文献
17.1.規範的参照
[1] ITU-T勧告H.264、「一般的な視聴覚サービスのための高度なビデオコーディング」、2010年3月.

[2] ISO / IEC国際規格14496-10：2008.

[3] ITU-T勧告H.241、「H.300シリーズ端末の拡張ビデオ手順と制御信号」、2006年5月.

[4] Bradner、S.、「要件レベルを示すためにRFCで使用するためのキーワード」、BCP 14、RFC 2119、1997年3月.

[5] Schulzrinne、H.、Casner、S.、Frederick、R.、およびV. Jacobson、「RTP：A Transport Protocol for Real-Time Applications」、STD 64、RFC 3550、2003年7月.

[6] Handley、M.、Jacobson、V.、およびC. Perkins、「SDP：Session Description Protocol」、RFC 4566、2006年7月.

[7] Josefsson、S.、「The Base16、Base32、およびBase64 Data Encodings」、RFC 4648、2006年10月.

[8] Rosenberg、J.およびH. Schulzrinne、「Session Description Protocol（SDP）を使用したオファー/アンサーモデル」、RFC 3264、2002年6月.

[9] Lennox、J.、Ott、J.、およびT. Schierl、「Session Description Protocol（SDP）のソース固有のメディア属性」、RFC 5576、2009年6月.

17.2.有益な参考文献
[10] Luthra、A.、Sullivan、GJ、およびT. Wiegand（eds.）、「H.264 / AVCビデオコーディング規格の特集号の紹介」、IEEE Transactions on Circuits and Systems for Video Technology、Vol. .１３、Ｎｏ．７、２００３年７月.

[11] Ott、J.、Bormann、C.、Sullivan、G.、Wenger、S.、and R. Even、Ed.、 "RTP Payload Format for ITU-TRec.H.263Video"、RFC 4629、 2007年1月.

[12] ISO / IEC国際規格14496-2：2004.

[13] Wenger、S.、「H.264 / AVC over IP」、IEEE Transaction on Circuits and Systems for Video Technology、Vol.１３、Ｎｏ．７、２００３年７月.

[14] Wenger、S.、「H.26L over IP：The IP-Network Adaptation Layer」、Proceedings Packet Video Workshop、2002年4月.

[15] Stockhammer、T.、Hannuksela、MM、およびS. Wenger、「H.26L / JVTコーディングネットワーク抽象化レイヤーおよびIPベースのトランスポート」、IEEE International Conference on Image Processing（ICIP 2002）、ニューヨーク州ロチェスター、9月2002年.

[16] Schulzrinne、H.およびS. Casner、「最小限の制御による音声およびビデオ会議のRTPプロファイル」、STD 65、RFC 3551、2003年7月.

[17] ITU-T勧告H.223、「低ビットレートマルチメディア通信用の多重化プロトコル」、2001年7月.

[18] Li、A.、Ed.、 "RTP Payload Format for Generic Forward Error Correction"、RFC 5109、2007年12月.

[19] Stockhammer、T.、Wiegand、T.、Oelbaum、T.、およびF. Obermeier、「パケット非可逆ネットワークを介したH.264 / AVCベースの伝送のためのビデオコーディングおよびトランスポート層技術」、IEEE International Conference on画像処理（ICIP 2003）、バルセロナ、スペイン、2003年9月.

[20] Varsa、V.およびM. Karczewicz、「圧縮ビデオパケット化におけるスライスインターリーブ」、Packet Video Workshop2000.

[21] Kang、SHおよびA. Zakhor、「ワイヤレスビデオストリーミング用のパケットスケジューリングアルゴリズム」、Packet Video Workshop2002.

[22] Hannuksela、MM、「Enhanced Concept of GOP」、JVT-B042、http：//ftp3.itu.int/av-arch/video-site/0201_Gen/JVT-B042.doc、2002年 1月.

[23] Wenger、S.、 "Video Redundancy Coding in H.263 +"、1997 International Workshop on Audio-Visual Services over Packet Networks、September1997.

[24] Wang、Y.-K.、Hannuksela、MM、and M. Gabbouj、 "Error Resilient Video Coding Using Unequally Protected Key Pictures"、Proc.国際ワークショップVLBV03、2003年9月.

[25] van der Meer、J.、Mackie、D.、Swaminathan、V.、Singer、D.、and P. Gentric、 "RTP Payload Format for Transport of MPEG-4 Elementary Streams"、RFC 3640、2003年11月.

[26] Baugher、M.、McGrew、D.、Naslund、M.、Carrara、E.、およびK. Norrman、「The Secure Real-time Transport Protocol（SRTP）」、RFC 3711、2004年3月.

[27] Schulzrinne、H.、Rao、A.、およびR. Lanphier、「Real Time Streaming Protocol（RTSP）」、RFC 2326、1998年4月.

[28] Handley、M.、Perkins、C.、およびE. Whelan、「Session Announcement Protocol」、RFC 2974、2000年10月.

[29] Westerlund、M.and S. Wenger、 "RTP Topologies"、RFC 5117、2008年1月.

[30] Wenger、S.、Chandra、U.、Westerlund、M.、およびB. Burman、「フィードバック付きRTPオーディオビジュアルプロファイル（AVPF）のコーデック制御メッセージ」、RFC 5104、2008年2月.

著者の住所

Ye-Kui Wang Huawei Technologies 400 Crossing Blvd、2nd Floor Bridgewater、NJ 08807 USA

   電話番号：+ 1-908-541-3518
   Eメール：yekui.wang@huawei.com
        
Roni Even Huawei Technologies 14 David Hamelech Tel Aviv64953イスラエル

   電話番号：+ 972-545481099
   Eメール：even.roni@huawei.com
        
Tom Kristensen TANDBERG Philip Pedersens vei 22 N-1366Lysakerノルウェー

   電話番号：+47 67125125
   Eメール：tom.kristensen @ tandberg.com、tomkri @ ifi.uio.no
        
Randell Jesup WorldGate Communications 3800 Horizo​​n Blvd、Suite＃103 Trevose、PA 19053-4947 USA

   電話番号：+ 1-215-354-5166
   Eメール：rjesup @ wgate.com、randell_ietf @ jesup.org
        